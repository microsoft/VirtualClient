"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[9222],{8967:(e,s,t)=>{t.r(s),t.d(s,{assets:()=>a,contentTitle:()=>r,default:()=>c,frontMatter:()=>d,metadata:()=>l,toc:()=>o});var i=t(4848),n=t(8453);const d={},r="Usage: Testing Disks",l={id:"guides/0220-usage-testing-disks",title:"Usage: Testing Disks",description:"VC automates disk formating and run storage workloads on the target systems. We documented the rules and the mechanism we used to identify disks to run workloads on.",source:"@site/docs/guides/0220-usage-testing-disks.md",sourceDirName:"guides",slug:"/guides/0220-usage-testing-disks",permalink:"/VirtualClient/docs/guides/0220-usage-testing-disks",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/guides/0220-usage-testing-disks.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Usage: Command Line Examples",permalink:"/VirtualClient/docs/guides/0200-usage-examples"},next:{title:"Using/Integrating Extensions",permalink:"/VirtualClient/docs/guides/0221-usage-extensions"}},a={},o=[{value:"Disk Mount Points",id:"disk-mount-points",level:2},{value:"Mount Points on Unix Systems",id:"mount-points-on-unix-systems",level:3},{value:"Mount Points on Windows Systems",id:"mount-points-on-windows-systems",level:3},{value:"General Disk Testing Guidelines",id:"general-disk-testing-guidelines",level:2},{value:"Disk Filters",id:"disk-filters",level:2},{value:"Default Filter",id:"default-filter",level:3},{value:"Disk Filter Examples",id:"disk-filter-examples",level:3}];function h(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,n.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.h1,{id:"usage-testing-disks",children:"Usage: Testing Disks"}),"\n",(0,i.jsx)(s.p,{children:"VC automates disk formating and run storage workloads on the target systems. We documented the rules and the mechanism we used to identify disks to run workloads on."}),"\n",(0,i.jsx)(s.h2,{id:"disk-mount-points",children:"Disk Mount Points"}),"\n",(0,i.jsx)(s.p,{children:"On certain systems, Virtual Client may need to create mount points on each of the disks in order to have both permissions and a path to\noperate disk I/O work. In general, Virtual Client must create mount points when the following is true:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:"Disks exist that do not have file system partitions/volumes (i.e. uninitialized disks)."}),"\n",(0,i.jsx)(s.li,{children:"Disks exist with file system partitions/volumes but without any pre-existing mount points/access paths."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"The remainder of this section documents where disk mount points are created on the system when required."}),"\n",(0,i.jsx)(s.h3,{id:"mount-points-on-unix-systems",children:"Mount Points on Unix Systems"}),"\n",(0,i.jsx)(s.p,{children:'The following table illustrates the mount points that will be created when required on Unix systems. When logged in as the "root" on the system,\nmount points will be created at the root of the file system directory structure. When logged in as a user other than "root"\n(including when running as "sudo"), mount points will be created in the user home directory (e.g. /home/user)'}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"Logged In User"}),(0,i.jsx)(s.th,{children:"Disk/Device Paths"}),(0,i.jsx)(s.th,{children:"Mount Points/Paths"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"root"}),(0,i.jsxs)(s.td,{children:["/dev/sdc1",(0,i.jsx)("br",{}),"/dev/sdd1"]}),(0,i.jsxs)(s.td,{children:["/mnt_dev_sdc1",(0,i.jsx)("br",{}),"/mnt_dev_sdd1"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"root"}),(0,i.jsxs)(s.td,{children:["/dev/sdc1",(0,i.jsx)("br",{}),"/dev/sdc2",(0,i.jsx)("br",{}),"/dev/sdd1",(0,i.jsx)("br",{}),"/dev/sdd2"]}),(0,i.jsxs)(s.td,{children:["/mnt_dev_sdc1",(0,i.jsx)("br",{}),"/mnt_dev_sdc2",(0,i.jsx)("br",{}),"/mnt_dev_sdd1",(0,i.jsx)("br",{}),"/mnt_dev_sdd2"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"non-root user"}),(0,i.jsxs)(s.td,{children:["/dev/sdc1",(0,i.jsx)("br",{}),"/dev/sdd1"]}),(0,i.jsxs)(s.td,{children:["/mnt_dev_sdc1",(0,i.jsx)("br",{}),"/mnt_dev_sdd1"]})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"non-root user"}),(0,i.jsxs)(s.td,{children:["/dev/sdc1",(0,i.jsx)("br",{}),"/dev/sdc2",(0,i.jsx)("br",{}),"/dev/sdd1",(0,i.jsx)("br",{}),"/dev/sdd2"]}),(0,i.jsxs)(s.td,{children:["/home/{user}/mnt_dev_sdc1",(0,i.jsx)("br",{}),"/home/{user}/mnt_dev_sdc2",(0,i.jsx)("br",{}),"/home/{user}/mnt_dev_sdd1",(0,i.jsx)("br",{}),"/home/{user}/mnt_dev_sdd2"]})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"mount-points-on-windows-systems",children:"Mount Points on Windows Systems"}),"\n",(0,i.jsx)(s.p,{children:"Mount points are NOT typically required on Windows systems once disks are formatted and have partitions/volumes. This is because Windows associates\na letter with each volume (e.g. C:, D:) and this the disk volume + file system is accessible through this path."}),"\n",(0,i.jsx)("mark",{children:"Virtual Client does not currently support formatting disks beyond the first 26 disks due to inherent Windows limitations. Virtual Client can\noperate on systems with more than 26 total partitions/volumes; however, these must be prepared before running the application"}),"\n",(0,i.jsx)(s.h2,{id:"general-disk-testing-guidelines",children:"General Disk Testing Guidelines"}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsx)(s.li,{children:"When targeting the OS disk, ONLY the OS partition for that disk will be targeted."}),"\n",(0,i.jsx)(s.li,{children:"For systems having disks with more than 1 partition, all partitions will be targeted."}),"\n",(0,i.jsxs)(s.li,{children:["On Unix systems having disks with more than 1 partition, the following device paths are excluded: ",(0,i.jsx)(s.code,{children:"/"}),", ",(0,i.jsx)(s.code,{children:"/mnt"}),", ",(0,i.jsx)(s.code,{children:"/boot/efi"}),"."]}),"\n",(0,i.jsxs)(s.li,{children:["On Unix systems, device paths having the following prefixes are targeted: ",(0,i.jsx)(s.code,{children:"/dev/hd"}),", ",(0,i.jsx)(s.code,{children:"/dev/sd"}),", ",(0,i.jsx)(s.code,{children:"/dev/nvme"}),", ",(0,i.jsx)(s.code,{children:"/dev/xvd"}),"."]}),"\n",(0,i.jsx)(s.li,{children:"On Windows systems, disks that are offline or read-only will not be targeted."}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"disk-filters",children:"Disk Filters"}),"\n",(0,i.jsx)(s.p,{children:"Different environments, Azure, AWS/GCP, Lab host, Lab VM, have vastly different configuration of disks. It is a challenge to have a schema that allows you to target the desired disk consistently.\nVirtual Client implements a set of DiskFilters to accomplish this."}),"\n",(0,i.jsx)(s.p,{children:"Disk Filters are delimited by ampersand '&'. FilterName and FilterValues are delimited by colon, if applicable.\nFor example, the following filter will return you the disks that are not OS Disk, and is between 3TB and 5TB in size."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"OSDisk:false&SizeGreaterThan:3TB&SizeLessThan:5TB\n"})}),"\n",(0,i.jsxs)(s.p,{children:['It is important to note that filters are calculated in-order and are non-commutative. In other words, the filter will be examined from left to right, in order. For example, if you have a small os disk and a larger data disk,\n"OSDisk',":false",'&SmallestSize" will return you the data disk, and "SmallestSize&OSDisk',":false",'" will return empty.']}),"\n",(0,i.jsxs)(s.table,{children:[(0,i.jsx)(s.thead,{children:(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.th,{children:"FilterName"}),(0,i.jsx)(s.th,{children:"Parameter"}),(0,i.jsx)(s.th,{children:"Description"})]})}),(0,i.jsxs)(s.tbody,{children:[(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"None"}),(0,i.jsx)(s.td,{children:"N/A"}),(0,i.jsx)(s.td,{children:"Return all the disks on system."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"BiggestSize"}),(0,i.jsx)(s.td,{children:"N/A"}),(0,i.jsx)(s.td,{children:"Finds all the disks with the biggest size."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SmallestSize"}),(0,i.jsx)(s.td,{children:"N/A"}),(0,i.jsx)(s.td,{children:"Finds all the disks with the smallest size."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SizeGreaterThan"}),(0,i.jsx)(s.td,{children:"Long : size in bytes (Support units like 5 GB)"}),(0,i.jsx)(s.td,{children:"Will return disks greater or equal than defined size."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SizeLessThan"}),(0,i.jsx)(s.td,{children:"Long : size in bytes (Support units like 4 TB)"}),(0,i.jsx)(s.td,{children:"Will return disks less or equal than defined size."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"SizeEqualTo"}),(0,i.jsx)(s.td,{children:"Long : size in bytes (Support units like 3 MB)"}),(0,i.jsx)(s.td,{children:"Will return disks with in \xb11% range of defined size."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"OSDisk"}),(0,i.jsx)(s.td,{children:"Bool: include"}),(0,i.jsx)(s.td,{children:"Default to true, which will return OSDisk only. Set to false to remove OS disk."})]}),(0,i.jsxs)(s.tr,{children:[(0,i.jsx)(s.td,{children:"DiskPath"}),(0,i.jsx)(s.td,{children:"string: Disk paths delimited by comma"}),(0,i.jsx)(s.td,{children:"Return the disk which matches the provided disk path."})]})]})]}),"\n",(0,i.jsx)(s.h3,{id:"default-filter",children:"Default Filter"}),"\n",(0,i.jsx)(s.p,{children:"Default filter means getting the biggest disks."}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"BiggestSize\n"})}),"\n",(0,i.jsx)(s.h3,{id:"disk-filter-examples",children:"Disk Filter Examples"}),"\n",(0,i.jsx)(s.p,{children:"Here we give some example filters for disk testing scenarios."}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["Test all the biggest disks except your OS disk. The ",(0,i.jsx)(s.code,{children:"OSDisk:false"})," would be redundant if it's smaller than the disks you want to test."]}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"BiggestSize&OSDisk:false\n"})}),"\n",(0,i.jsxs)(s.ol,{start:"2",children:["\n",(0,i.jsx)(s.li,{children:"Testing the OS disk"}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"OSDisk\n"})}),"\n",(0,i.jsxs)(s.ol,{start:"3",children:["\n",(0,i.jsx)(s.li,{children:"Testing the smallest non-OS disk."}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"Smallest&OSDisk:false\n"})}),"\n",(0,i.jsxs)(s.ol,{start:"4",children:["\n",(0,i.jsx)(s.li,{children:"Test specific disks on your machine with size.\nThis filter would return all the non-OS disk volumes with size of 4TB \xb11%. If you want to test a specific disk with a unique size like 4TB, you can do filters that targets that disk."}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"SizeEqualTo:4TB&OSDisk:false\n"})}),"\n",(0,i.jsxs)(s.ol,{start:"5",children:["\n",(0,i.jsx)(s.li,{children:"Test a Disk which has a specific path.\nThis filter will select the disk, which contains exact match of any specified disk path, in either Disk or Volume. For example, if D:/, E:/ are volumes on same disk and D:/ is provided, the entire disk will be selected."}),"\n"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-bash",children:"DiskPath:C:/,D:/\nDiskPath:/dev/sda,/dev/sdb\n"})})]})}function c(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(h,{...e})}):h(e)}},8453:(e,s,t)=>{t.d(s,{R:()=>r,x:()=>l});var i=t(6540);const n={},d=i.createContext(n);function r(e){const s=i.useContext(d);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:r(e.components),i.createElement(d.Provider,{value:s},e.children)}}}]);