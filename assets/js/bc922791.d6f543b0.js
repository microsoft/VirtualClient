"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[4720],{4755:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>l,contentTitle:()=>o,default:()=>p,frontMatter:()=>r,metadata:()=>c,toc:()=>a});var t=n(4848),s=n(8453);const r={},o="Lspci",c={id:"monitors/0400-lspci",title:"Lspci",description:"The PCI Utilities package contains a library for portable access to PCI bus",source:"@site/docs/monitors/0400-lspci.md",sourceDirName:"monitors",slug:"/monitors/0400-lspci",permalink:"/VirtualClient/docs/monitors/0400-lspci",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/monitors/0400-lspci.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Nvidia SMI",permalink:"/VirtualClient/docs/monitors/0300-nvidia-smi"},next:{title:"Dependencies",permalink:"/VirtualClient/docs/category/dependencies"}},l={},a=[{value:"Dependency",id:"dependency",level:2},{value:"Supported Platforms",id:"supported-platforms",level:2},{value:"lspci Output Description",id:"lspci-output-description",level:2},{value:"Example",id:"example",level:3}];function d(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i.h1,{id:"lspci",children:"Lspci"}),"\n",(0,t.jsx)(i.p,{children:"The PCI Utilities package contains a library for portable access to PCI bus\nconfiguration registers and several utilities based on this library."}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"lspci: displays detailed information about all PCI buses and devices."}),"\n"]}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://github.com/pciutils/pciutils",children:"lspci repo"})}),"\n",(0,t.jsx)(i.li,{children:(0,t.jsx)(i.a,{href:"https://eternallybored.org/misc/pciutils/",children:"Windows Build Download"})}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"dependency",children:"Dependency"}),"\n",(0,t.jsx)(i.p,{children:"Most Linux distro comes with lspci pre-installed. On Windows, VC is packaging a win-x64 build inside VC package itself."}),"\n",(0,t.jsx)(i.h2,{id:"supported-platforms",children:"Supported Platforms"}),"\n",(0,t.jsxs)(i.ul,{children:["\n",(0,t.jsx)(i.li,{children:"linux-x64"}),"\n",(0,t.jsx)(i.li,{children:"linux-arm64"}),"\n",(0,t.jsx)(i.li,{children:"win-x64"}),"\n"]}),"\n",(0,t.jsx)(i.h2,{id:"lspci-output-description",children:"lspci Output Description"}),"\n",(0,t.jsx)(i.p,{children:"The following section describes the various counters/metrics that are available with the lspci toolset."}),"\n",(0,t.jsxs)(i.p,{children:["The command we are using is ",(0,t.jsx)(i.code,{children:"lspci -vvv"}),". The data structure of the lspci output is not a straightforward dicctionary.\nThe data structure is parsed according to the contract at ",(0,t.jsx)(i.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:n(2919).A+"",children:"PciDevice.cs"}),"."]}),"\n",(0,t.jsx)(i.p,{children:"For each PCI device, we are parsing the name, address, various properties and capabilities."}),"\n",(0,t.jsx)(i.h3,{id:"example",children:"Example"}),"\n",(0,t.jsx)(i.p,{children:"This is an example of the minimum profile to run LspciMonitor. The PCI devices is not expected to change often, so the monitor frequency could be set very low."}),"\n",(0,t.jsx)(i.pre,{children:(0,t.jsx)(i.code,{className:"language-json",children:'{\n    "Description": "Default Monitors",\n    "Parameters": {\n      "MonitorFrequency": "12:00:00",\n      "MonitorWarmupPeriod": "00:01:00"\n    },\n    "Monitors": [\n      {\n        "Type": "LspciMonitor",\n        "Parameters": {\n          "Scenario": "CapturePCIDevicesDetails",\n          "MonitorFrequency": "$.Parameters.MonitorFrequency",\n          "MonitorWarmupPeriod": "$.Parameters.MonitorWarmupPeriod"\n        }\n      }\n    ]\n  }\n'})})]})}function p(e={}){const{wrapper:i}={...(0,s.R)(),...e.components};return i?(0,t.jsx)(i,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},2919:(e,i,n)=>{n.d(i,{A:()=>t});const t=n.p+"assets/files/PciDevice-ba08be1dc159cbe061efdc1bfd4ae48b.cs"},8453:(e,i,n)=>{n.d(i,{R:()=>o,x:()=>c});var t=n(6540);const s={},r=t.createContext(s);function o(e){const i=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(i):{...i,...e}}),[i,e])}function c(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(r.Provider,{value:i},e.children)}}}]);