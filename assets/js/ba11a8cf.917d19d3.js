"use strict";(self.webpackChunkvirtualclient=self.webpackChunkvirtualclient||[]).push([[9222],{8967:(e,s,i)=>{i.r(s),i.d(s,{assets:()=>a,contentTitle:()=>d,default:()=>c,frontMatter:()=>l,metadata:()=>r,toc:()=>h});var t=i(4848),n=i(8453);const l={},d="Usage: Testing Disks",r={id:"guides/0220-usage-testing-disks",title:"Usage: Testing Disks",description:"VC automates disk formating and run storage workloads on the target systems. We documented the rules and the mechanism we used to identify disks to run workloads on.",source:"@site/docs/guides/0220-usage-testing-disks.md",sourceDirName:"guides",slug:"/guides/0220-usage-testing-disks",permalink:"/VirtualClient/docs/guides/0220-usage-testing-disks",draft:!1,unlisted:!1,editUrl:"https://github.com/microsoft/VirtualClient/edit/main/website/docs/guides/0220-usage-testing-disks.md",tags:[],version:"current",frontMatter:{},sidebar:"tutorialSidebar",previous:{title:"Usage: Command Line Examples",permalink:"/VirtualClient/docs/guides/0200-usage-examples"},next:{title:"Using/Integrating Extensions",permalink:"/VirtualClient/docs/guides/0221-usage-extensions"}},a={},h=[{value:"Rules",id:"rules",level:2},{value:"Disk Filters",id:"disk-filters",level:2},{value:"Default Filter",id:"default-filter",level:3},{value:"Disk Filter Examples",id:"disk-filter-examples",level:3}];function o(e){const s={code:"code",h1:"h1",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",...(0,n.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.h1,{id:"usage-testing-disks",children:"Usage: Testing Disks"}),"\n",(0,t.jsx)(s.p,{children:"VC automates disk formating and run storage workloads on the target systems. We documented the rules and the mechanism we used to identify disks to run workloads on."}),"\n",(0,t.jsx)(s.h2,{id:"rules",children:"Rules"}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsx)(s.li,{children:"On OS Disk, only run on the OS partition."}),"\n",(0,t.jsx)(s.li,{children:"If other disks have more than 1 partition, run on all concurrently that passes the filters (exclude /, /mnt, /boot.efi)"}),"\n",(0,t.jsxs)(s.li,{children:["On Linux, only run on four prefix: ",(0,t.jsx)(s.code,{children:"/dev/hd"}),", ",(0,t.jsx)(s.code,{children:"/dev/sd"}),", ",(0,t.jsx)(s.code,{children:"/dev/nvme"}),", ",(0,t.jsx)(s.code,{children:"/dev/xvd"}),"."]}),"\n",(0,t.jsx)(s.li,{children:"On Windows, disks with status set to offline and read-only will be filtered out."}),"\n"]}),"\n",(0,t.jsx)(s.h2,{id:"disk-filters",children:"Disk Filters"}),"\n",(0,t.jsx)(s.p,{children:"Different environments, Azure, AWS/GCP, Lab host, Lab VM, have vastly different configuration of disks. It is a challenge to have a schema that allows you to target the desired disk consistently.\nVirtual Client implements a set of DiskFilters to accomplish this."}),"\n",(0,t.jsx)(s.p,{children:"Disk Filters are delimited by ampersand '&'. FilterName and FilterValues are delimited by colon, if applicable.\nFor example, the following filter will return you the disks that are not OS Disk, and is between 3TB and 5TB in size."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"OSDisk:false&SizeGreaterThan:3TB&SizeLessThan:5TB\n"})}),"\n",(0,t.jsxs)(s.p,{children:['It is important to note that filters are calculated in-order and are non-commutative. In other words, the filter will be examined from left to right, in order. For example, if you have a small os disk and a larger data disk,\n"OSDisk',":false",'&SmallestSize" will return you the data disk, and "SmallestSize&OSDisk',":false",'" will return empty.']}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"FilterName"}),(0,t.jsx)(s.th,{children:"Parameter"}),(0,t.jsx)(s.th,{children:"Description"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"None"}),(0,t.jsx)(s.td,{children:"N/A"}),(0,t.jsx)(s.td,{children:"Return all the disks on system."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"BiggestSize"}),(0,t.jsx)(s.td,{children:"N/A"}),(0,t.jsx)(s.td,{children:"Finds all the disks with the biggest size."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SmallestSize"}),(0,t.jsx)(s.td,{children:"N/A"}),(0,t.jsx)(s.td,{children:"Finds all the disks with the smallest size."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SizeGreaterThan"}),(0,t.jsx)(s.td,{children:"Long : size in bytes (Support units like 5 GB)"}),(0,t.jsx)(s.td,{children:"Will return disks greater or equal than defined size."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SizeLessThan"}),(0,t.jsx)(s.td,{children:"Long : size in bytes (Support units like 4 TB)"}),(0,t.jsx)(s.td,{children:"Will return disks less or equal than defined size."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"SizeEqualTo"}),(0,t.jsx)(s.td,{children:"Long : size in bytes (Support units like 3 MB)"}),(0,t.jsx)(s.td,{children:"Will return disks with in \xb11% range of defined size."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"OSDisk"}),(0,t.jsx)(s.td,{children:"Bool: include"}),(0,t.jsx)(s.td,{children:"Default to true, which will return OSDisk only. Set to false to remove OS disk."})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"DiskPath"}),(0,t.jsx)(s.td,{children:"string: Disk paths delimited by comma"}),(0,t.jsx)(s.td,{children:"Return the disk which matches the provided disk path."})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"default-filter",children:"Default Filter"}),"\n",(0,t.jsx)(s.p,{children:"Default filter means getting the biggest disks."}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"BiggestSize\n"})}),"\n",(0,t.jsx)(s.h3,{id:"disk-filter-examples",children:"Disk Filter Examples"}),"\n",(0,t.jsx)(s.p,{children:"Here we give some example filters for disk testing scenarios."}),"\n",(0,t.jsxs)(s.ol,{children:["\n",(0,t.jsxs)(s.li,{children:["Test all the biggest disks except your OS disk. The ",(0,t.jsx)(s.code,{children:"OSDisk:false"})," would be redundant if it's smaller than the disks you want to test."]}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"BiggestSize&OSDisk:false\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"2",children:["\n",(0,t.jsx)(s.li,{children:"Testing the OS disk"}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"OSDisk\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"3",children:["\n",(0,t.jsx)(s.li,{children:"Testing the smallest non-OS disk."}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"Smallest&OSDisk:false\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"4",children:["\n",(0,t.jsx)(s.li,{children:"Test specific disks on your machine with size.\nThis filter would return all the non-OS disk volumes with size of 4TB \xb11%. If you want to test a specific disk with a unique size like 4TB, you can do filters that targets that disk."}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"SizeEqualTo:4TB&OSDisk:false\n"})}),"\n",(0,t.jsxs)(s.ol,{start:"5",children:["\n",(0,t.jsx)(s.li,{children:"Test a Disk which has a specific path.\nThis filter will select the disk, which contains exact match of any specified disk path, in either Disk or Volume. For example, if D:/, E:/ are volumes on same disk and D:/ is provided, the entire disk will be selected."}),"\n"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-bash",children:"DiskPath:C:/,D:/\nDiskPath:/dev/sda,/dev/sdb\n"})})]})}function c(e={}){const{wrapper:s}={...(0,n.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},8453:(e,s,i)=>{i.d(s,{R:()=>d,x:()=>r});var t=i(6540);const n={},l=t.createContext(n);function d(e){const s=t.useContext(l);return t.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function r(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(n):e.components||n:d(e.components),t.createElement(l.Provider,{value:s},e.children)}}}]);