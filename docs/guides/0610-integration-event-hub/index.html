<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/0610-integration-event-hub" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Azure Event Hub Integration | Virtual Client Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/VirtualClient/docs/guides/0610-integration-event-hub/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="performance, benchmarking, automation, framework, microsoft"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Azure Event Hub Integration | Virtual Client Platform"><meta data-rh="true" name="description" content="Azure Event Hubs is a highly scalable Azure cloud messaging hub/proxy that has out-of-the-box integration with a number of other Azure data/data"><meta data-rh="true" property="og:description" content="Azure Event Hubs is a highly scalable Azure cloud messaging hub/proxy that has out-of-the-box integration with a number of other Azure data/data"><link data-rh="true" rel="icon" href="/VirtualClient/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/VirtualClient/docs/guides/0610-integration-event-hub/"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/guides/0610-integration-event-hub/" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/guides/0610-integration-event-hub/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0I7D8A07MA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/VirtualClient/blog/rss.xml" title="Virtual Client Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/VirtualClient/blog/atom.xml" title="Virtual Client Platform Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Virtual Client Platform" href="/VirtualClient/opensearch.xml"><link rel="stylesheet" href="/VirtualClient/assets/css/styles.fe082272.css">
<script src="/VirtualClient/assets/js/runtime~main.781da10b.js" defer="defer"></script>
<script src="/VirtualClient/assets/js/main.78f43021.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like VirtualClient, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/VirtualClient">GitHub</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/VirtualClient/"><div class="navbar__logo"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Virtual Client</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/VirtualClient/docs/overview/">Documentation</a><a class="navbar__item navbar__link" href="/VirtualClient/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/overview/">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/VirtualClient/docs/category/guides/">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/getting-started/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0002-getting-started-client-server/">Getting Started (Client/Server)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0003-getting-started-docker/">Getting Started (Docker)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0010-command-line/">Command Line Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0011-profiles/">Profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0020-client-server/">Client/Server Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0030-commercial-workloads/">Run Commercial Workloads: Bring Your Own Package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0040-telemetry/">Data/Telemetry Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0200-usage-examples/">Usage: Command Line Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0220-usage-testing-disks/">Usage: Testing Disks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0221-usage-extensions/">Using/Integrating Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0600-integration-blob-storage/">Azure Storage Account Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/VirtualClient/docs/guides/0610-integration-event-hub/">Azure Event Hub Integration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/workloads/">Workloads</a><button aria-label="Expand sidebar category &#x27;Workloads&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/monitors/">Monitors</a><button aria-label="Expand sidebar category &#x27;Monitors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/dependencies/">Dependencies</a><button aria-label="Expand sidebar category &#x27;Dependencies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/developing/">Developing</a><button aria-label="Expand sidebar category &#x27;Developing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/VirtualClient/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/VirtualClient/docs/category/guides/"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Azure Event Hub Integration</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Azure Event Hub Integration</h1>
<p>Azure Event Hubs is a highly scalable Azure cloud messaging hub/proxy that has out-of-the-box integration with a number of other Azure data/data
pipeline resources (e.g. Azure Data Explorer/Kusto, Azure Storage Account). Virtual Client allows the user to supply a connection string to an Event Hubs namespace on the command line. The remainder of this document
covers the requirements for using an Event Hub including the setup.</p>
<ul>
<li><a href="/VirtualClient/docs/guides/0040-telemetry/">Data/Telemetry Basics</a></li>
<li><a href="https://azure.microsoft.com/en-us/services/event-hubs/?OCID=AID2200277_SEM_e21e0a74b99318c95ac66be89b11ec19:G:s&amp;ef_id=e21e0a74b99318c95ac66be89b11ec19:G:s&amp;msclkid=e21e0a74b99318c95ac66be89b11ec19" target="_blank" rel="noopener noreferrer">Event Hub Documentation</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-hubs-integration">Event Hubs integration<a class="hash-link" aria-label="Direct link to Event Hubs integration" title="Direct link to Event Hubs integration" href="/VirtualClient/docs/guides/0610-integration-event-hub/#event-hubs-integration">​</a></h2>
<p>Event Hub is a highly scalable Azure cloud messaging hub/proxy that has out-of-the-box integration with a number of other Azure data/data
pipeline resources (e.g. Azure Data Explorer/Kusto, Azure Storage Account). Virtual Client allows the user to supply a connection string to an Event Hubs namespace on the command line. The remainder of this document
covers the requirements for using an Event Hub including the setup.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-preliminaries">Authentication Preliminaries<a class="hash-link" aria-label="Direct link to Authentication Preliminaries" title="Direct link to Authentication Preliminaries" href="/VirtualClient/docs/guides/0610-integration-event-hub/#authentication-preliminaries">​</a></h2>
<p>The sections below will reference the use of certificates for authentication with Azure storage account resources. This section describes a
few preliminary expectations to consider when using certificates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="referencing-certificates-on-linux">Referencing Certificates on Linux<a class="hash-link" aria-label="Direct link to Referencing Certificates on Linux" title="Direct link to Referencing Certificates on Linux" href="/VirtualClient/docs/guides/0610-integration-event-hub/#referencing-certificates-on-linux">​</a></h3>
<p>Virtual Client is a .NET application. Certificates used on a Linux system must be X.509 certificates containing a private key (e.g. PKCS#12, *.pfx). Additionally, the
certificates must be installed on the system in the expected location for the user in which Virtual Client is running. The following locations
describe where Virtual Client/.NET will search to find certificates.</p>
<ul>
<li>
<p><strong>Root</strong><br>
<!-- -->When running the Virtual Client application as root (e.g. sudo ./VirtualClient), the application (.NET) will search for certificates
in <code>/root/.dotnet/corefx/cryptography/x509stores/my/</code> directory location.</p>
</li>
<li>
<p><strong>Specific User</strong><br>
<!-- -->When running the Virtual Client application as a specific user (e.g. /home/{user} ./VirtualClient), the application (.NET) will search for certificates
in <code>/home/{user}/.dotnet/corefx/cryptography/x509stores/my/</code> directory location. The directory MUST allow at least read/write access for the user to this directory and the
certificate files within it or Virtual Client will hit a permissions issue.</p>
<mark><p>Installation involves simply copying the certificate file (*.pfx) into the directory. In fact, it is generally recommended that certificate files (e.g. *.pfx) be copied into this user-specific
directory for Virtual Client use cases.</p></mark>
<p>If you experience a permissions issue when running Virtual Client and trying to access certificates, you can attribute permissions on the
directory using the following command option:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">chmod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-R</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">700</span><span class="token plain"> /home/</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain">/.dotnet/corefx/cryptography/x509stores/my/</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">chmod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-R</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">700</span><span class="token plain"> /home/anyuser/.dotnet/corefx/cryptography/x509stores/my/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="referencing-certificates-on-windows">Referencing Certificates on Windows<a class="hash-link" aria-label="Direct link to Referencing Certificates on Windows" title="Direct link to Referencing Certificates on Windows" href="/VirtualClient/docs/guides/0610-integration-event-hub/#referencing-certificates-on-windows">​</a></h3>
<p>Virtual Client will look for certificates in the following store locations on Windows systems.</p>
<ul>
<li>
<p><strong>CurrentUser/Personal</strong><br>
<!-- -->The personal certificate store for current user logged into the system. This is the first certificate store in which Virtual Client will search for
certificates.</p>
<mark><p>It is generally recommended that certificate files (e.g. *.pfx) be installed into this user-specific certificate store for Virtual Client use cases.</p></mark>
</li>
<li>
<p><strong>LocalMachine/Personal</strong><br>
<!-- -->The local machine certificate store for the system. This is the second certificate store in which Virtual Client will search for
certificates.</p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-hubs-authentication">Event Hubs Authentication<a class="hash-link" aria-label="Direct link to Event Hubs Authentication" title="Direct link to Event Hubs Authentication" href="/VirtualClient/docs/guides/0610-integration-event-hub/#event-hubs-authentication">​</a></h2>
<p>Virtual Client supports connection string-style as well as URI-style definitions. The the following sections covers authentication options for
Azure Event Hub namespace access.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="uri-style-references">URI-Style References<a class="hash-link" aria-label="Direct link to URI-Style References" title="Direct link to URI-Style References" href="/VirtualClient/docs/guides/0610-integration-event-hub/#uri-style-references">​</a></h3>
<p>The following documentation illustrates how to use URI-style references for accessing Event Hub namespaces.</p>
<ul>
<li>
<p><strong>Microsoft Entra ID/App With Certificate (referenced by thumbprint)</strong><br>
<!-- -->The following section shows how to use a Microsoft Entra ID/App and a certificate referenced by its thumbprint to authenticate with Azure Event Hub resources
(see the &#x27;Authentication Preliminaries&#x27; section above). The following URI query string parameters are required:</p>
<ul>
<li>
<p><strong>crtt</strong><br>
<!-- -->The unique thumbprint (SHA1) of the certificate to use for authentication against the Microsoft Entra ID/App.</p>
</li>
<li>
<p><strong>cid</strong><br>
<!-- -->The client ID of the Microsoft Entra ID/App to use for authentication against the Azure Event Hub namespace.</p>
</li>
<li>
<p><strong>tid</strong><br>
<!-- -->The ID of the Azure tenant/directory in which the Microsoft Entra ID/App exists.</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Given a Microsoft Entra ID/App with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Application Client ID = 08331e3b-1458-4de2-b1d6-7007bc7221d5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Azure Tenant ID       = 573b5dBbe-c477-4a10-8986-a7fe10e2d79B</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a certificate with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Thumbprint = f5b114e61c6a81b40c1e7a5e4d11ac47da6e445f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference certificate by thumbprint</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventHub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;sb://any.servicebus.windows.net?cid=08331e3b-1458-4de2-b1d6-7007bc7221d5&amp;tid=573b5dBbe-c477-4a10-8986-a7fe10e2d79B&amp;crtt=f5b114e61c6a81b40c1e7a5e4d11ac47da6e445f&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Microsoft Entra ID/App With Certificate (referenced by issuer and subject name)</strong><br>
<!-- -->The following section shows how to use a Microsoft Entra ID/App and a certificate referenced by its issuer and subject name to authenticate with Azure Event Hub resources
(see the &#x27;Authentication Preliminaries&#x27; section above). The following parameters are required:</p>
<ul>
<li>
<p><strong>crti</strong><br>
<!-- -->The issuer defined in the certificate to use for authentication against the Microsoft Entra ID/App (e.g. CN=ABC CA 01, DC=ABC, DC=COM).</p>
</li>
<li>
<p><strong>crts</strong><br>
<!-- -->The subject name defined in the certificate to use for authentication against the Microsoft Entra ID/App (e.g. CN=any.domain.com).</p>
</li>
<li>
<p><strong>cid</strong><br>
<!-- -->The client ID of the Microsoft Entra ID/App to use for authentication against the Azure Event Hub namespace.</p>
</li>
<li>
<p><strong>tid</strong><br>
<!-- -->The ID of the Azure tenant/directory in which the Microsoft Entra ID/App exists.</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Given a Microsoft Entra ID/App with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Application Client ID = 08331e3b-1458-4de2-b1d6-7007bc7221d5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Azure Tenant ID       = 573b5dBbe-c477-4a10-8986-a7fe10e2d79B</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a certificate with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Issuer    = CN=ABC CA 01, DC=ABC, DC=COM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Subject   = CN=any.domain.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference certificate by issuer and subject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventHub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;sb://any.servicebus.windows.net?cid=08331e3b-1458-4de2-b1d6-7007bc7221d5&amp;tid=573b5dBbe-c477-4a10-8986-a7fe10e2d79B&amp;crti=CN=ABC CA 01, DC=ABC, DC=COM&amp;crts=CN=any.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference parts of the certificate issuer and subject (e.g. COM, ABC, ABC CA 01).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventHub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;sb://any.servicebus.windows.net?cid=08331e3b-1458-4de2-b1d6-7007bc7221d5&amp;tid=573b5dBbe-c477-4a10-8986-a7fe10e2d79B&amp;crti=COM&amp;crts=any.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventHub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;sb://any.servicebus.windows.net?cid=08331e3b-1458-4de2-b1d6-7007bc7221d5&amp;tid=573b5dBbe-c477-4a10-8986-a7fe10e2d79B&amp;crti=ABC&amp;crts=any.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventHub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;sb://any.servicebus.windows.net?cid=08331e3b-1458-4de2-b1d6-7007bc7221d5&amp;tid=573b5dBbe-c477-4a10-8986-a7fe10e2d79B&amp;crti=ABC CA 01&amp;crts=any.domain.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Microsoft Azure Managed Identity</strong><br>
<!-- -->The following section shows how to use a Microsoft Azure managed identity to authenticate with Azure Event Hub namespace resources.
The following parameters are required:</p>
<ul>
<li><strong>miid</strong><br>
<!-- -->The client ID of the managed identity to use for authentication against the storage account.</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Given a Microsoft Azure Managed Identity with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Managed Identity Client ID = 6d3c5db8-e14b-44b7-9887-d168b5f659f6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;sb://any.servicebus.windows.net?miid=6d3c5db8-e14b-44b7-9887-d168b5f659f6&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="connection-string-style-references">Connection String-Style References<a class="hash-link" aria-label="Direct link to Connection String-Style References" title="Direct link to Connection String-Style References" href="/VirtualClient/docs/guides/0610-integration-event-hub/#connection-string-style-references">​</a></h3>
<p>The following documentation illustrates how to use connection string-style references for accessing Event Hub namespaces.</p>
<ul>
<li>
<p><strong>Microsoft Entra ID/App With Certificate (referenced by thumbprint)</strong><br>
<!-- -->The following section shows how to use a Microsoft Entra ID/App and a certificate referenced by its thumbprint to authenticate with Event Hub namespace resources
(see the &#x27;Authentication Preliminaries&#x27; section above). The following parameters are required:</p>
<ul>
<li>
<p><strong>CertificateThumbprint</strong><br>
<!-- -->The unique thumbprint (SHA1) of the certificate to use for authentication against the Microsoft Entra ID/App.</p>
</li>
<li>
<p><strong>ClientId</strong><br>
<!-- -->The client ID of the Microsoft Entra ID/App to use for authentication against the Azure Event Hub namespace.</p>
</li>
<li>
<p><strong>TenantId</strong><br>
<!-- -->The ID of the Azure tenant/directory in which the Microsoft Entra ID/App exists.</p>
</li>
<li>
<p><strong>EventHubNamespace</strong><br>
<!-- -->The Event Hub namespace to which the telemetry will be sent. Note that the Microsoft Entra ID/App must be given
appropriate RBAC permissions to the Event Hub namespace (e.g. Azure Event Hubs Data Sender).</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Given a Microsoft Entra ID/App with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Application Client ID  = 08331e3b-1458-4de2-b1d6-7007bc7221d5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Azure Tenant ID        = 573b5dBbe-c477-4a10-8986-a7fe10e2d79B</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a certificate with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Thumbprint = f5b114e61c6a81b40c1e7a5e4d11ac47da6e445f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference certificate by thumbprint</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventhub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;EndpointUrl=sb://any.servicebus.windows.net;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;CertificateThumbprint=f5b114e61c6a81b40c1e7a5e4d11ac47da6e445f&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Microsoft Entra ID/App With Certificate (referenced by issuer and subject name)</strong><br>
<!-- -->The following section shows how to use a Microsoft Entra ID/App and a certificate referenced by its issuer and subject name to authenticate with Event Hub namespace resources
(see the &#x27;Authentication Preliminaries&#x27; section above). The following parameters are required:</p>
<ul>
<li>
<p><strong>CertificateIssuer</strong><br>
<!-- -->The issuer defined in the certificate to use for authentication against the Microsoft Entra ID/App (e.g. CN=ABC CA 01, DC=ABC, DC=COM).</p>
</li>
<li>
<p><strong>CertificateSubject</strong><br>
<!-- -->The subject name defined in the certificate to use for authentication against the Microsoft Entra ID/App (e.g. CN=any.domain.com).</p>
</li>
<li>
<p><strong>ClientId</strong><br>
<!-- -->The client ID of the Microsoft Entra ID/App to use for authentication against the Azure Event Hub namespace.</p>
</li>
<li>
<p><strong>TenantId</strong><br>
<!-- -->The ID of the Azure tenant/directory in which the Microsoft Entra ID/App exists.</p>
</li>
<li>
<p><strong>EventHubNamespace</strong><br>
<!-- -->The Event Hub namespace to which the telemetry will be sent. Note that the Microsoft Entra ID/App must be given
appropriate RBAC permissions to the Event Hub namespace (e.g. Azure Event Hubs Data Sender).</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Given a Microsoft Entra ID/App with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Application Client ID = 08331e3b-1458-4de2-b1d6-7007bc7221d5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Azure Tenant ID       = 573b5dBbe-c477-4a10-8986-a7fe10e2d79B</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a certificate with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Issuer    = CN=ABC CA Authority 01, DC=ABC, DC=COM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Subject   = CN=any.domain.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference certificate by issuer and subject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventhub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;EndpointUrl=sb://any.servicebus.windows.net;CertificateIssuer=CN=ABC CA 01, DC=ABC, DC=COM;CertificateSubject=CN=any.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference parts of the certificate issuer and subject (e.g. COM, ABC, ABC CA 01).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventhub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;EndpointUrl=sb://any.servicebus.windows.net;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;CertificateIssuer=COM;CertificateSubject=any.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventhub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;EndpointUrl=sb://any.servicebus.windows.net;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;CertificateIssuer=ABC;CertificateSubject=any.domain.com&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventhub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;EndpointUrl=sb://any.servicebus.windows.net;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;CertificateIssuer=ABC CA 01;CertificateSubject=any.domain.com&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Microsoft Azure Managed Identity</strong><br>
<!-- -->The following section shows how to use a Microsoft Azure managed identity to authenticate with Azure Event Hub namespace resources.
The following parameters are required:</p>
<ul>
<li>
<p><strong>ManagedIdentityId</strong><br>
<!-- -->The client ID of the managed identity to use for authentication against the Event Hub namespace.</p>
</li>
<li>
<p><strong>EventHubNamespace</strong><br>
<!-- -->The Event Hub namespace to which the telemetry will be sent. Note that the managed identity must be given
appropriate RBAC permissions to the Event Hub namespace (e.g. Azure Event Hubs Data Sender).</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Given a Microsoft Azure Managed Identity with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Managed Identity ID = 6d3c5db8-e14b-44b7-9887-d168b5f659f6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--eventhub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;EndpointUrl=sb://any.servicebus.windows.net;ManagedIdentityId=6d3c5db8-e14b-44b7-9887-d168b5f659f6&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Event Hub Namespace Shared Access Policies</strong><br>
<!-- -->The following section shows how to use an Event Hub Shared Access Policy (i.e. connection string) to authenticate with Azure Event Hub namespace resources.
The following parameters are required:</p>
<p><a href="https://learn.microsoft.com/en-us/azure/event-hubs/event-hubs-get-connection-string" target="_blank" rel="noopener noreferrer">https://learn.microsoft.com/en-us/azure/event-hubs/event-hubs-get-connection-string</a></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token parameter variable" style="color:#cb4b16">--eventHub</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;Endpoint=sb://aaa.servicebus.windows.net/;SharedAccessKeyName=TelemetrySharedAccessKey;SharedAccessKey=bbbbbbbbbb...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-event-hub-namespace">Create Event Hub Namespace<a class="hash-link" aria-label="Direct link to Create Event Hub Namespace" title="Direct link to Create Event Hub Namespace" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-event-hub-namespace">​</a></h3>
<p>The Virtual Client emits data for each one of these categories into a distinct/singular target Event Hub within an Event Hub namespace (a 1-to-1 mapping).
In order to use Event Hub with the Virtual Client, an Event Hub namespace must be setup. The following recommendations relate to the Event Hub namespace itself.</p>
<ul>
<li><strong>Throughput Units</strong><br>
<!-- -->Throughput units control the capacity for each individual Event Hub created in the namespace. It is recommended that you set this
to at least 20 for production scenarios. For non-production scale scenarios, this can be set to between 5 and 10. Fortunately, this
setting can be changed at any point to enable the Event Hubs in the namespace to handle additional message volume.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-event-hubs">Create Event Hubs<a class="hash-link" aria-label="Direct link to Create Event Hubs" title="Direct link to Create Event Hubs" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-event-hubs">​</a></h3>
<p>The Event Hub namespace will need 4 Event Hubs to be created. The following steps describe requirements and recommendations. These are general recommendations
based upon the VC team&#x27;s experience that are designed to support high volumes of telemetry (e.g. hundreds of millions of events per day per hub).</p>
<ul>
<li>
<p><strong>telemetry-events</strong><br>
<!-- -->Create an Event Hub named &#x27;telemetry-events&#x27; to intake system events data emitted by the Virtual Client. The following specifications should be used when creating
this Event Hub.</p>
<ul>
<li>Message Retention: 2 days</li>
<li>Partition Count: Production Scale = 32, Non-Production/Test Scale = 10</li>
</ul>
</li>
<li>
<p><strong>telemetry-logs</strong><br>
<!-- -->Create an Event Hub named &#x27;telemetry-logs&#x27; to intake logs/traces data emitted by the Virtual Client. The following specifications should be used when creating
this Event Hub.</p>
<ul>
<li>Message Retention: 2 days</li>
<li>Partition Count: Production Scale = 32, Non-Production/Test Scale = 10</li>
</ul>
</li>
<li>
<p><strong>telemetry-metrics</strong><br>
<!-- -->Create an Event Hub named &#x27;telemetry-metrics&#x27; to intake workload metrics/measurements data emitted by the Virtual Client. The following specifications should be used when creating
this Event Hub.</p>
<ul>
<li>Message Retention: 2 days</li>
<li>Partition Count: Production Scale = 32, Non-Production/Test Scale = 10</li>
</ul>
<p><img decoding="async" loading="lazy" alt="Event Hub Namespace Throughput Units" src="/VirtualClient/assets/images/eventhub-integration-1-71bfdd9bf8129bf173dc4e260c59a66e.png" width="1140" height="500" class="img_ev3q">
<img decoding="async" loading="lazy" alt="Event Hub Namespace Throughput Units" src="/VirtualClient/assets/images/eventhub-integration-2-612eb5fdb6b3c969802d581660c787b2.png" width="1136" height="728" class="img_ev3q"></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="event-hubs-and-azure-data-explorer-integration">Event Hubs and Azure Data Explorer integration<a class="hash-link" aria-label="Direct link to Event Hubs and Azure Data Explorer integration" title="Direct link to Event Hubs and Azure Data Explorer integration" href="/VirtualClient/docs/guides/0610-integration-event-hub/#event-hubs-and-azure-data-explorer-integration">​</a></h2>
<p>The following section describes how to setup an existing Azure Data Explorer (ADX) cluster to support ingesting Virtual Client data/telemetry
from the set of Event Hubs describe above. Azure Data Explorer has out-of-box support for defining &quot;data connectors&quot; that will handle the ingestion
of the data on a rapid cadence with little to no data loss. The data from Virtual Client will be ingested into tables within the ADX cluster in a 1-to-1
mapping with the Event Hubs noted above.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-event-hub-consumer-groups">Create Event Hub Consumer Groups<a class="hash-link" aria-label="Direct link to Create Event Hub Consumer Groups" title="Direct link to Create Event Hub Consumer Groups" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-event-hub-consumer-groups">​</a></h3>
<p>On each of the Event Hubs created/noted above (e.g. telemetry-logs, telemetry-metrics) in the Event Hub namespace, create a consumer group named
&#x27;adx-ingestion&#x27;. This consumer group will be used exclusively by the ADX data connectors described below to ingest data from the Event Hubs
into the ADX cluster database tables.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-databases-and-tables">Create Databases and Tables<a class="hash-link" aria-label="Direct link to Create Databases and Tables" title="Direct link to Create Databases and Tables" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-databases-and-tables">​</a></h3>
<p>The following steps describe the databases and tables required.</p>
<ul>
<li>
<p><strong>Create a Database for Logs/Traces Data</strong><br>
<!-- -->Create a database to host tables that maintain logs/traces data. Data retention periods are defined at the database level in Azure Data Explorer.
Virtual Client logs/traces data is useful for debugging necessities but not typically needed to be kept for very long periods of time (vs. performance and monitoring)
data. Set the data retention period to a value that makes sense for your process. For example, the VC team maintains logs/traces data for 30 days.
You can name the database whatever you like. The VC team uses the name &#x27;WorkloadDiagnostics&#x27; for this database.</p>
</li>
<li>
<p><strong>Add Managed Identity to the &#x27;Database Ingestor&#x27; Role</strong><br>
<!-- -->Add the managed identity created above to the access permissions for the ADX/Kusto database in which the tables below will be created with the
role &#x27;Database Ingestor&#x27;.</p>
</li>
<li>
<p><strong>Create the Tables for Logs/Traces Data</strong><br>
<!-- -->Data retention periods are defined at the database level in Azure Data Explorer. As such, a different database should be used to host this data
versus the database used to host performance and monitoring data. Set the data retention period to a value that makes sense for your process.
For example, the VC team maintains logs/traces data for 30 days.</p>
<p>Run the following Kusto Query Language (KQL) commands to create the tables required for ingesting Virtual Client data.</p>
<div class="language-kusto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kusto codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// Create the table for capturing traces/logs/errors</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.create</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">table</span><span class="token plain"> Traces </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Timestamp</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">datetime</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ExperimentId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ClientId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Profile</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ProfileName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Message</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    SeverityLevel</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">int</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ItemType</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ExecutionSystem</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperatingSystemPlatform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperationId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperationParentId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppHost</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppTelemetryVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    CustomDimensions</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">dynamic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Create a Database for Performance and Monitoring Data</strong><br>
<!-- -->Create a database to host tables that maintain performance and monitoring data. This data is useful for analyzing the performance of the system as well
as resource usage and is typically desirable to keep for a longer period of time. Set the data retention period to a value that makes sense for your process. For example,
the VC team maintains performance and monitoring data for 10 years/3,650 days. You can name the database whatever you like. The VC team uses the name &#x27;WorkloadPerformance&#x27;
for this database.</p>
</li>
<li>
<p><strong>Add Managed Identity to the &#x27;Database Ingestor&#x27; Role</strong><br>
<!-- -->Add the managed identity created above to the access permissions for the ADX/Kusto database in which the tables below will be created with the
role &#x27;Database Ingestor&#x27;.</p>
</li>
<li>
<p><strong>Create the Tables for Performance and Monitoring Data</strong><br>
<!-- -->As noted above, it is typically desirable to maintain . Performance and monitoring data are useful over long periods of time
to analyze historical trends.</p>
<p>Run the following Kusto Query Language (KQL) commands to create the tables required for ingesting Virtual Client data.</p>
<div class="language-kusto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kusto codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// Create the table that will maintain important system events information.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.create</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">table</span><span class="token plain"> Events </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Timestamp</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">datetime</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ExperimentId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ClientId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Profile</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ProfileName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    EventType</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    EventInfo</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">dynamic</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    SeverityLevel</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">int</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ItemType</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ExecutionSystem</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperatingSystemPlatform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperationId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperationParentId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppHost</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppTelemetryVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Tags</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    CustomDimensions</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">dynamic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">// Create the table to maintain workload and system metrics/counters.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.create</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">table</span><span class="token plain"> Metrics </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Timestamp</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">datetime</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ExperimentId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ClientId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Profile</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ProfileName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ToolName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ScenarioName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ScenarioStartTime</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">datetime</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ScenarioEndTime</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">datetime</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    MetricCategorization</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    MetricName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    MetricValue</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">real</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    MetricUnit</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    ExecutionSystem</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperatingSystemPlatform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperationId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    OperationParentId</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppName</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppHost</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    AppTelemetryVersion</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    Tags</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">string</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    CustomDimensions</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">dynamic</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-the-json-ingestion-mappings">Create the JSON Ingestion Mappings<a class="hash-link" aria-label="Direct link to Create the JSON Ingestion Mappings" title="Direct link to Create the JSON Ingestion Mappings" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-the-json-ingestion-mappings">​</a></h3>
<p>JSON ingestion mappings define how to map the information in the structure of the events on the Event Hub with the table columns in the
ADX databases.</p>
<ul>
<li>
<p><strong>Create the Ingestion Mappings for the Logs/Traces Data</strong><br>
<!-- -->Run the following Kusto Query Language (KQL) commands to create the JSON ingestion mappings required for ingesting Virtual Client logs/traces data.</p>
<div class="language-kusto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kusto codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// 1) Create the ingestion mappings for the &#x27;Traces&#x27; table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.create</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">table</span><span class="token plain"> Traces </span><span class="token keyword" style="color:#c5a5c5">ingestion</span><span class="token plain"> json mapping </span><span class="token string" style="color:#8dc891">&#x27;IngestionMapping&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;[{&quot;column&quot;:&quot;Timestamp&quot;,&quot;path&quot;:&quot;$.timestamp&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ExperimentId&quot;,&quot;path&quot;:&quot;$.customDimensions.experimentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ClientId&quot;,&quot;path&quot;:&quot;$.customDimensions.metadata.agentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;Profile&quot;,&quot;path&quot;:&quot;$.customDimensions.executionProfile&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ProfileName&quot;,&quot;path&quot;:&quot;$.customDimensions.executionProfileName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;Message&quot;,&quot;path&quot;:&quot;$.message&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;SeverityLevel&quot;,&quot;path&quot;:&quot;$.severityLevel&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ItemType&quot;,&quot;path&quot;:&quot;$.itemType&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ExecutionSystem&quot;,&quot;path&quot;:&quot;$.customDimensions.executionSystem&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperatingSystemPlatform&quot;,&quot;path&quot;:&quot;$.customDimensions.operatingSystemPlatform&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperationId&quot;,&quot;path&quot;:&quot;$.operation_Id&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperationParentId&quot;,&quot;path&quot;:&quot;$.operation_ParentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppName&quot;,&quot;path&quot;:&quot;$.appName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppHost&quot;,&quot;path&quot;:&quot;$.appHost&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppVersion&quot;,&quot;path&quot;:&quot;$.customDimensions.appVersion&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppTelemetryVersion&quot;,&quot;path&quot;:&quot;$.sdkVersion&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;CustomDimensions&quot;,&quot;path&quot;:&quot;$.customDimensions&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null}]&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Create the Ingestion Mappings for the Performance and Monitoring Data</strong><br>
<!-- -->Run the following Kusto Query Language (KQL) commands to create the JSON ingestion mappings required for ingesting Virtual Client performance and monitoring data.</p>
<div class="language-kusto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kusto codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// 1) Create the ingestion mappings for the &#x27;Events&#x27; table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.create</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">table</span><span class="token plain"> Events </span><span class="token keyword" style="color:#c5a5c5">ingestion</span><span class="token plain"> json mapping </span><span class="token string" style="color:#8dc891">&#x27;IngestionMapping&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;[{&quot;column&quot;:&quot;Timestamp&quot;,&quot;path&quot;:&quot;$.timestamp&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ExperimentId&quot;,&quot;path&quot;:&quot;$.customDimensions.experimentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ClientId&quot;,&quot;path&quot;:&quot;$.customDimensions.metadata.agentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;Profile&quot;,&quot;path&quot;:&quot;$.customDimensions.executionProfile&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ProfileName&quot;,&quot;path&quot;:&quot;$.customDimensions.executionProfileName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;EventType&quot;,&quot;path&quot;:&quot;$.customDimensions.eventType&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;EventInfo&quot;,&quot;path&quot;:&quot;$.customDimensions.eventInfo&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;SeverityLevel&quot;,&quot;path&quot;:&quot;$.severityLevel&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ItemType&quot;,&quot;path&quot;:&quot;$.itemType&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ExecutionSystem&quot;,&quot;path&quot;:&quot;$.customDimensions.executionSystem&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperatingSystemPlatform&quot;,&quot;path&quot;:&quot;$.customDimensions.operatingSystemPlatform&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperationId&quot;,&quot;path&quot;:&quot;$.operation_Id&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperationParentId&quot;,&quot;path&quot;:&quot;$.operation_ParentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppName&quot;,&quot;path&quot;:&quot;$.appName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppHost&quot;,&quot;path&quot;:&quot;$.appHost&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppVersion&quot;,&quot;path&quot;:&quot;$.customDimensions.appVersion&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppTelemetryVersion&quot;,&quot;path&quot;:&quot;$.sdkVersion&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;Tags&quot;,&quot;path&quot;:&quot;$.customDimensions.tags&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;CustomDimensions&quot;,&quot;path&quot;:&quot;$.customDimensions&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null}]&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">// 2) Create the ingestion mappings for the &#x27;Metrics&#x27; table</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.create</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">table</span><span class="token plain"> Metrics </span><span class="token keyword" style="color:#c5a5c5">ingestion</span><span class="token plain"> json mapping </span><span class="token string" style="color:#8dc891">&#x27;IngestionMapping&#x27;</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;[{&quot;column&quot;:&quot;Timestamp&quot;,&quot;path&quot;:&quot;$.timestamp&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ExperimentId&quot;,&quot;path&quot;:&quot;$.customDimensions.experimentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ClientId&quot;,&quot;path&quot;:&quot;$.customDimensions.metadata.agentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;Profile&quot;,&quot;path&quot;:&quot;$.customDimensions.executionProfile&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ProfileName&quot;,&quot;path&quot;:&quot;$.customDimensions.executionProfileName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ToolName&quot;,&quot;path&quot;:&quot;$.customDimensions.toolName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ScenarioName&quot;,&quot;path&quot;:&quot;$.customDimensions.scenarioName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ScenarioStartTime&quot;,&quot;path&quot;:&quot;$.customDimensions.scenarioStartTime&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ScenarioEndTime&quot;,&quot;path&quot;:&quot;$.customDimensions.scenarioEndTime&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;MetricCategorization&quot;,&quot;path&quot;:&quot;$.customDimensions.metricCategorization&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;MetricName&quot;,&quot;path&quot;:&quot;$.customDimensions.metricName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;MetricValue&quot;,&quot;path&quot;:&quot;$.customDimensions.metricValue&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;MetricUnit&quot;,&quot;path&quot;:&quot;$.customDimensions.metricUnit&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;ExecutionSystem&quot;,&quot;path&quot;:&quot;$.customDimensions.executionSystem&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperatingSystemPlatform&quot;,&quot;path&quot;:&quot;$.customDimensions.operatingSystemPlatform&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperationId&quot;,&quot;path&quot;:&quot;$.operation_Id&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;OperationParentId&quot;,&quot;path&quot;:&quot;$.operation_ParentId&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppName&quot;,&quot;path&quot;:&quot;$.appName&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppHost&quot;,&quot;path&quot;:&quot;$.appHost&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppVersion&quot;,&quot;path&quot;:&quot;$.customDimensions.appVersion&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;AppTelemetryVersion&quot;,&quot;path&quot;:&quot;$.sdkVersion&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;Tags&quot;,&quot;path&quot;:&quot;$.customDimensions.tags&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null},{&quot;column&quot;:&quot;CustomDimensions&quot;,&quot;path&quot;:&quot;$.customDimensions&quot;,&quot;datatype&quot;:&quot;&quot;,&quot;transform&quot;:null}]&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="create-data-connectors">Create Data Connectors<a class="hash-link" aria-label="Direct link to Create Data Connectors" title="Direct link to Create Data Connectors" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-data-connectors">​</a></h3>
<p>The following steps describe the data connectors required to ingest data from the Event Hubs into the ADX tables.</p>
<ul>
<li>
<p><strong>Create Data Connector for Events Data</strong><br>
<!-- -->This data connector ingests data from the &#x27;telemetry-events&#x27; Event Hub into the VirtualClientEvents table. Use the following
settings during the creation of the data connector after you have selected the appropriate Event Hub information:</p>
<ul>
<li>Event Hub = telemetry-events</li>
<li>Consumer group = adx-ingestion</li>
<li>Event system properties = 0/none</li>
<li>Compression = None</li>
<li>Assign managed identity = (the managed identity created above)</li>
<li>Table Name = Events (or whatever name was used above when creating the table)</li>
<li>Data format = JSON</li>
<li>Mapping name = IngestionMapping (or whatever name was used above when creating the ingestion JSON mapping)</li>
</ul>
</li>
<li>
<p><strong>Create Data Connector for Logs/Traces Data</strong><br>
<!-- -->This data connector ingests data from the &#x27;telemetry-logs&#x27; Event Hub into the VirtualClientLogs table. Use the following
settings during the creation of the data connector after you have selected the appropriate Event Hub information:</p>
<ul>
<li>Event Hub = telemetry-logs</li>
<li>Consumer group = adx-ingestion</li>
<li>Event system properties = 0/none</li>
<li>Compression = None</li>
<li>Assign managed identity = (the managed identity created above)</li>
<li>Table Name = Traces (or whatever name was used above when creating the table)</li>
<li>Data format = JSON</li>
<li>Mapping name = IngestionMapping (or whatever name was used above when creating the ingestion JSON mapping)</li>
</ul>
</li>
<li>
<p><strong>Create Data Connector for Metrics Data</strong><br>
<!-- -->This data connector ingests data from the &#x27;telemetry-metrics&#x27; Event Hub into the VirtualClientMetrics table. Use the following
settings during the creation of the data connector after you have selected the appropriate Event Hub information:</p>
<ul>
<li>Event Hub = telemetry-metrics</li>
<li>Consumer group = adx-ingestion</li>
<li>Event system properties = 0/none</li>
<li>Compression = None</li>
<li>Assign managed identity = (the managed identity created above)</li>
<li>Table Name = Metrics (or whatever name was used above when creating the table)</li>
<li>Data format = JSON</li>
<li>Mapping name = IngestionMapping (or whatever name was used above when creating the ingestion JSON mapping)</li>
</ul>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-adx-cluster-ingestion-settings">Configure ADX Cluster Ingestion Settings<a class="hash-link" aria-label="Direct link to Configure ADX Cluster Ingestion Settings" title="Direct link to Configure ADX Cluster Ingestion Settings" href="/VirtualClient/docs/guides/0610-integration-event-hub/#configure-adx-cluster-ingestion-settings">​</a></h3>
<p>The following steps configure the Azure Data Explorer (ADX) cluster data ingestion settings.</p>
<ul>
<li>
<p><strong>Configure the Ingestion Cadence</strong><br>
<!-- -->Run the following command against the ADX cluster to configure how often the data ingestion jobs will run. ADX/Kusto can ingest
data in near-realtime intervals.</p>
<p><a href="https://docs.microsoft.com/en-us/azure/data-explorer/kusto/management/batchingpolicy" target="_blank" rel="noopener noreferrer">https://docs.microsoft.com/en-us/azure/data-explorer/kusto/management/batchingpolicy</a></p>
<div class="language-kusto codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-kusto codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// Update the ingestion batching policies on each of the databases. This updates the cadence for ingesting data </span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">// to be every 1 minute.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.alter</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">database</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">DatabaseName</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> policy ingestionbatching </span><span class="token string" style="color:#8dc891">@&quot;{ &#x27;MaximumBatchingTimeSpan&#x27;: &#x27;00:01:00&#x27;, &#x27;MaximumNumberOfItems&#x27;: 500, &#x27;MaximumRawDataSizeMB&#x27;: 1024 }&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">// View the ingestion batching policy</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token command keyword" style="color:#c5a5c5">.show</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">database</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">DatabaseName</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> policy ingestionbatching</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/microsoft/VirtualClient/edit/main/website/docs/guides/0610-integration-event-hub.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/VirtualClient/docs/guides/0600-integration-blob-storage/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Azure Storage Account Integration</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/VirtualClient/docs/category/workloads/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Workloads</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#event-hubs-integration">Event Hubs integration</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#authentication-preliminaries">Authentication Preliminaries</a><ul><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#referencing-certificates-on-linux">Referencing Certificates on Linux</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#referencing-certificates-on-windows">Referencing Certificates on Windows</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#event-hubs-authentication">Event Hubs Authentication</a><ul><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#uri-style-references">URI-Style References</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#connection-string-style-references">Connection String-Style References</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-event-hub-namespace">Create Event Hub Namespace</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-event-hubs">Create Event Hubs</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#event-hubs-and-azure-data-explorer-integration">Event Hubs and Azure Data Explorer integration</a><ul><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-event-hub-consumer-groups">Create Event Hub Consumer Groups</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-databases-and-tables">Create Databases and Tables</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-the-json-ingestion-mappings">Create the JSON Ingestion Mappings</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#create-data-connectors">Create Data Connectors</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0610-integration-event-hub/#configure-adx-cluster-ingestion-settings">Configure ADX Cluster Ingestion Settings</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/docs/overview/">Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://microsoft.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2024 Microsoft.</div></div></div></footer></div>
</body>
</html>