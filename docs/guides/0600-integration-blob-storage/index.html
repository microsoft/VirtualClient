<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-guides/0600-integration-blob-storage" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Azure Storage Account Integration | Virtual Client Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/VirtualClient/docs/guides/0600-integration-blob-storage/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="performance, benchmarking, automation, framework, microsoft"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Azure Storage Account Integration | Virtual Client Platform"><meta data-rh="true" name="description" content="Virtual Client supports a few different types of Azure Blob stores that can be used as part of a workload profile execution. This documentation"><meta data-rh="true" property="og:description" content="Virtual Client supports a few different types of Azure Blob stores that can be used as part of a workload profile execution. This documentation"><link data-rh="true" rel="icon" href="/VirtualClient/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/VirtualClient/docs/guides/0600-integration-blob-storage/"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/guides/0600-integration-blob-storage/" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/guides/0600-integration-blob-storage/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0I7D8A07MA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/VirtualClient/blog/rss.xml" title="Virtual Client Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/VirtualClient/blog/atom.xml" title="Virtual Client Platform Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Virtual Client Platform" href="/VirtualClient/opensearch.xml"><link rel="stylesheet" href="/VirtualClient/assets/css/styles.fe082272.css">
<script src="/VirtualClient/assets/js/runtime~main.a2507edc.js" defer="defer"></script>
<script src="/VirtualClient/assets/js/main.d101646e.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like VirtualClient, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/VirtualClient">GitHub</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/VirtualClient/"><div class="navbar__logo"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Virtual Client</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/VirtualClient/docs/overview/">Documentation</a><a class="navbar__item navbar__link" href="/VirtualClient/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/overview/">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/VirtualClient/docs/category/guides/">Guides</a><button aria-label="Collapse sidebar category &#x27;Guides&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/getting-started/">Getting Started</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0002-getting-started-client-server/">Getting Started (Client/Server)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0003-getting-started-docker/">Getting Started (Docker)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0010-command-line/">Command Line Options</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0011-profiles/">Profiles</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0020-client-server/">Client/Server Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0030-commercial-workloads/">Run Commercial Workloads: Bring Your Own Package</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0040-telemetry/">Data/Telemetry Support</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0200-usage-examples/">Usage: Command Line Examples</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0220-usage-testing-disks/">Usage: Testing Disks</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0221-usage-extensions/">Using/Integrating Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/VirtualClient/docs/guides/0600-integration-blob-storage/">Azure Storage Account Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/guides/0610-integration-event-hub/">Azure Event Hub Integration</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/workloads/">Workloads</a><button aria-label="Expand sidebar category &#x27;Workloads&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/monitors/">Monitors</a><button aria-label="Expand sidebar category &#x27;Monitors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/dependencies/">Dependencies</a><button aria-label="Expand sidebar category &#x27;Dependencies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/developing/">Developing</a><button aria-label="Expand sidebar category &#x27;Developing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/VirtualClient/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/VirtualClient/docs/category/guides/"><span itemprop="name">Guides</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Azure Storage Account Integration</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Azure Storage Account Integration</h1>
<p>Virtual Client supports a few different types of Azure Blob stores that can be used as part of a workload profile execution. This documentation
covers how to supply those blob stores to the Virtual Client on the command line as well as how to use them in Virtual Client codebase.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="supported-blob-stores">Supported Blob Stores<a class="hash-link" aria-label="Direct link to Supported Blob Stores" title="Direct link to Supported Blob Stores" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#supported-blob-stores">​</a></h2>
<p>The following stores are supported by the Virtual Client. The stores must be Azure Storage Account blob stores.</p>
<ul>
<li>
<p><strong>Packages Store</strong><br>
<!-- -->The packages blob store contains workload and dependency packages that must be downloaded to a system during the execution of a
workload profile. These are typically NuGet/zip files that contain binaries, scripts, etc... that are required by the scenario profile.</p>
<p>The packages store can be supplied to the Virtual Client on the command line using the &#x27;--packageStore&#x27; parameter and supplying the
full connection string to the Azure storage account blob resource.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># The blob container does not require authentication (i.e. blob-anonymous read access)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">VirtualClient.exe </span><span class="token parameter variable" style="color:#cb4b16">--profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF-NETWORK.json </span><span class="token parameter variable" style="color:#cb4b16">--timeout</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1440</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--packageStore</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;https://any.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># The blob continer requires authentication (e.g. a SAS token)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">VirtualClient.exe </span><span class="token parameter variable" style="color:#cb4b16">--profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF-NETWORK.json </span><span class="token parameter variable" style="color:#cb4b16">--timeout</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1440</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--packageStore</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;https://any.blob.core.windows.net/packages?sp=r&amp;st=2022-05-09T18:31:45Z&amp;se=2030-05-10T02:31:45Z&amp;spr=https&amp;sv=2020-08-04&amp;sr=c&amp;sig=...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="packages store" src="/VirtualClient/assets/images/blob-storage-support-1-d9b6235d6d18b00cc7b4386411085260.png" width="1179" height="479" class="img_ev3q"></p>
</li>
<li>
<p><strong>Content Store</strong><br>
<!-- -->The content blob store is used for uploading files and content captured by workloads or monitors that run as part of Virtual Client workload
operations. For example, a monitor might be implemented to upload certain types of logs, bin files or cab files to the specified content blob
store.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token preprocessor property" style="color:#2aa198"># The blob container does not </span><span class="token return-type class-name" style="color:#fac863">require</span><span class="token plain"> authentication </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">i</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">e</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"> blob</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">anonymous </span><span class="token class-name" style="color:#fac863">read</span><span class="token plain"> access</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">VirtualClient</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">exe </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">NETWORK</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">json </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">timeout</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1440</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">contentStore</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;https://any.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token preprocessor property" style="color:#2aa198"># The blob continer </span><span class="token return-type class-name" style="color:#fac863">requires</span><span class="token plain"> authentication </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">e</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">g</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"> a </span><span class="token class-name" style="color:#fac863">SAS</span><span class="token plain"> token</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">VirtualClient</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">exe </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF</span><span class="token operator" style="color:#fc929e">-</span><span class="token plain">NETWORK</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">json </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">timeout</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1440</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">--</span><span class="token plain">contentStore</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;https://any.blob.core.windows.net/packages?sp=r&amp;st=2022-05-09T18:31:45Z&amp;se=2030-05-10T02:31:45Z&amp;spr=https&amp;sv=2020-08-04&amp;sr=c&amp;sig=...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p><img decoding="async" loading="lazy" alt="monitoring content" src="/VirtualClient/assets/images/blob-storage-support-2-47336ce50b38a5094f58f1be47565aeb.png" width="1350" height="530" class="img_ev3q"></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="authentication-preliminaries">Authentication Preliminaries<a class="hash-link" aria-label="Direct link to Authentication Preliminaries" title="Direct link to Authentication Preliminaries" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#authentication-preliminaries">​</a></h2>
<p>The sections below will reference the use of certificates for authentication with Azure storage account resources. This section describes a
few preliminary expectations to consider when using certificates.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="referencing-certificates-on-linux">Referencing Certificates on Linux<a class="hash-link" aria-label="Direct link to Referencing Certificates on Linux" title="Direct link to Referencing Certificates on Linux" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#referencing-certificates-on-linux">​</a></h3>
<p>Virtual Client is a .NET application. Certificates used on a Linux system must be X.509 certificates containing a private key (e.g. PKCS#12, *.pfx). Additionally, the
certificates must be installed on the system in the expected location for the user in which Virtual Client is running. The following locations
describe where Virtual Client/.NET will search to find certificates:</p>
<ul>
<li>
<p><strong>Root</strong><br>
<!-- -->When running the Virtual Client application as root (e.g. sudo ./VirtualClient), the application (.NET) will search for certificates
in <code>/root/.dotnet/corefx/cryptography/x509stores/my/</code> directory location.</p>
</li>
<li>
<p><strong>Specific User</strong><br>
<!-- -->When running the Virtual Client application as a specific user (e.g. /home/{user} ./VirtualClient), the application (.NET) will search for certificates
in <code>/{user}/.dotnet/corefx/cryptography/x509stores/my/</code> directory location. The directory MUST allow at least read/write access for the user to this directory and the
certificate files within it or Virtual Client will hit a permissions issue.</p>
<p>If you experience a permissions issue when running Virtual Client and trying to access certificates, you can attribute permissions on the
directory using the following command option:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">chmod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-R</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">700</span><span class="token plain"> /</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">user</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain">/.dotnet/corefx/cryptography/x509stores/my/</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">chmod</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-R</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">700</span><span class="token plain"> /anyuser/.dotnet/corefx/cryptography/x509stores/my/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="blob-store-authentication">Blob Store Authentication<a class="hash-link" aria-label="Direct link to Blob Store Authentication" title="Direct link to Blob Store Authentication" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#blob-store-authentication">​</a></h2>
<p>Virtual Client supports the following authentication options for all blob stores:</p>
<p><a href="https://docs.microsoft.com/en-us/azure/storage/common/storage-sas-overview" target="_blank" rel="noopener noreferrer">Shared Access Signatures (SAS) Overview</a><br>
<a href="https://docs.microsoft.com/en-us/rest/api/storageservices/create-account-sas?redirectedfrom=MSDN" target="_blank" rel="noopener noreferrer">Account Shared Access Signatures</a></p>
<ul>
<li>
<p><strong>Microsoft Entra ID/App With Certificate (referenced by thumbprint)</strong><br>
<!-- -->The following section shows how to use a Microsoft Entra ID/App and a certificate referenced by its thumbprint to authenticate with Azure storage account resources
(see the &#x27;Authentication Preliminaries&#x27; section above). The following parameters are required:</p>
<ul>
<li>
<p><strong>CertificateThumbprint</strong><br>
<!-- -->The unique thumbprint (SHA1) of the certificate to use for authentication against the Microsoft Entra ID/App.</p>
</li>
<li>
<p><strong>ClientId</strong><br>
<!-- -->The client ID of the Microsoft Entra ID/App to use for authentication against the Azure storage account.</p>
</li>
<li>
<p><strong>TenantId</strong><br>
<!-- -->The ID of the Azure tenant/directory in which the Microsoft Entra ID/App exists.</p>
</li>
<li>
<p><strong>EndpointUrl</strong><br>
<!-- -->The full URL to the target Azure storage account. Note that the Microsoft Entra ID/App must be given
appropriate RBAC permissions to the storage account (e.g. Reader and Data Access + Storage Blob Data Reader or Storage Blob Data Contributor).</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Given a Microsoft Entra ID/App with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Application Client ID = 08331e3b-1458-4de2-b1d6-7007bc7221d5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Azure Tenant ID       = 573b5dBbe-c477-4a10-8986-a7fe10e2d79B</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a certificate with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Thumbprint = f5b114e61c6a81b40c1e7a5e4d11ac47da6e445f</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference full Issuer and Subject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateThumbprint=f5b114e61c6a81b40c1e7a5e4d11ac47da6e445f;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Microsoft Entra ID/App With Certificate (referenced by issuer and subject name)</strong><br>
<!-- -->The following section shows how to use a Microsoft Entra ID/App and a certificate referenced by its issuer and subject name to authenticate with Azure storage account resources
(see the &#x27;Authentication Preliminaries&#x27; section above). The following parameters are required:</p>
<ul>
<li>
<p><strong>CertificateIssuer</strong><br>
<!-- -->The issuer defined in the certificate to use for authentication against the Microsoft Entra ID/App (e.g. CN=ABC CA Authority 01, DC=ABC, DC=COM).</p>
</li>
<li>
<p><strong>CertificateSubject</strong><br>
<!-- -->The subject name defined in the certificate to use for authentication against the Microsoft Entra ID/App (e.g. CN=any.domain.com).</p>
</li>
<li>
<p><strong>ClientId</strong><br>
<!-- -->The client ID of the Microsoft Entra ID/App to use for authentication against the Azure storage account.</p>
</li>
<li>
<p><strong>TenantId</strong><br>
<!-- -->The ID of the Azure tenant/directory in which the Microsoft Entra ID/App exists.</p>
</li>
<li>
<p><strong>EndpointUrl</strong><br>
<!-- -->The full URL to the target Azure storage account. Note that the Microsoft Entra ID/App must be given
appropriate RBAC permissions to the storage account (e.g. Reader and Data Access + Storage Blob Data Reader or Storage Blob Data Contributor).</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Given a Microsoft Entra ID/App with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Application Client ID = 08331e3b-1458-4de2-b1d6-7007bc7221d5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Azure Tenant ID       = 573b5dBbe-c477-4a10-8986-a7fe10e2d79B</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a certificate with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Issuer    = CN=ABC CA Authority 01, DC=ABC, DC=COM</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Certificate Subject   = CN=any.domain.com</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference full Issuer and Subject</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=CN=ABC CA Authority 01, DC=ABC, DC=COM;CertificateSubject=CN=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--content</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=CN=ABC CA Authority 01, DC=ABC, DC=COM;CertificateSubject=CN=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Reference parts of the Issuer and Subject (e.g. COM, ABC, ABC CA Authority 01). Note that the full value of the part (e.g. CN=, DC=)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># must be defined. A substring is not valid.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=COM;CertificateSubject=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=ABC;CertificateSubject=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=ABC CA Authority 01;CertificateSubject=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--content</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=COM;CertificateSubject=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--content</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=ABC;CertificateSubject=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--content</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;CertificateIssuer=ABC CA Authority 01;CertificateSubject=any.domain.com;ClientId=08331e3b-1458-4de2-b1d6-7007bc7221d5;TenantId=573b5dBbe-c477-4a10-8986-a7fe10e2d79B;EndpointUrl=https://anystorageaccount.blob.core.windows.net&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Microsoft Azure Managed Identity</strong><br>
<!-- -->The following section shows how to use a Microsoft Azure managed identity to authenticate with Azure storage account namespace resources.
The following parameters are required:</p>
<ul>
<li>
<p><strong>ManagedIdentityId</strong><br>
<!-- -->The client ID of the managed identity to use for authentication against the storage account.</p>
</li>
<li>
<p><strong>EndpointUrl</strong><br>
<!-- -->The full URL to the target Azure storage account. Note that the managed identity must be given
appropriate RBAC permissions to the storage account (e.g. Reader and Data Access + Storage Blob Data Reader or Storage Blob Data Contributor).</p>
</li>
</ul>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Given a Microsoft Azure Managed Identity with the following properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Managed Identity ID = 6d3c5db8-e14b-44b7-9887-d168b5f659f6</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;ManagedIdentityId=6d3c5db8-e14b-44b7-9887-d168b5f659f6;EndpointUrl=https://yourblobstore.blob.core.windows.net&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Storage Account Blob Service SAS URI</strong><br>
<!-- -->This is a SAS URI to the Blob service in the storage account. This provides exactly the same types of privileges as the Blob service-level connection string noted above.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;https://anystorageaccount.blob.core.windows.net/?sv=2020-08-04&amp;ss=b&amp;srt=c&amp;sp=rwlacx&amp;se=2021-11-23T14:30:18Z&amp;st=2021-11-23T02:19:18Z&amp;spr=https&amp;sig=jcql6El...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Use the following recommendations when creating shared access keys in the blob store to ensure the right amount of privileges
are granted to the Virtual Client application for uploading and downloading blobs.</p>
<p>Select the following options when defining shared access signatures at the Blob service level:</p>
<ul>
<li>Allowed services = Blob</li>
<li>Allowed resource types = Container, Object</li>
<li>Allowed permissions = Read (allow Write and Create permissions if the storage account will be used for log/content uploads)</li>
<li>Allowed protocols = HTTPS only</li>
</ul>
<p><img decoding="async" loading="lazy" src="/VirtualClient/assets/images/blob-service-sas-1-913224b9cf8a2c796f3d819b91939292.png" width="1357" height="914" class="img_ev3q"></p>
</li>
<li>
<p><strong>Storage Account Blob Container SAS URI</strong><br>
<!-- -->This is a SAS URI to a single blob container within the storage account. This is the most restrictive way of providing privileges but is also the most secure because it
provides the least amount of access to the application. This is a good fit for scenarios where all content (e.g. across all monitors) is uploaded to a single container
within the blob store.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token parameter variable" style="color:#cb4b16">--packages</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;https://anystorageaccount.blob.core.windows.net/packages?sp=r&amp;st=2021-11-23T18:22:49Z&amp;se=2021-11-24T02:22:49Z&amp;spr=https&amp;sv=2020-08-04&amp;sr=c&amp;sig=ndyPRH...&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Select the following options when defining shared access signatures at the Blob container level:</p>
<ul>
<li>Signing method = Account key</li>
<li>Permissions = Read (allow Write and Create permissions if the storage account will be used for log/content uploads)</li>
<li>Allowed protocols = HTTPS only</li>
</ul>
<p><img decoding="async" loading="lazy" src="/VirtualClient/assets/images/blob-container-sas-1-92090121e019eb6d574ed1e48d2ec0ea.png" width="1000" height="743" class="img_ev3q"></p>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="storage-account-blob-conventions-for-contentfile-uploads">Storage Account Blob Conventions for Content/File Uploads<a class="hash-link" aria-label="Direct link to Storage Account Blob Conventions for Content/File Uploads" title="Direct link to Storage Account Blob Conventions for Content/File Uploads" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#storage-account-blob-conventions-for-contentfile-uploads">​</a></h2>
<p>In order to ensure that files/content uploaded (e.g. --content usages) are easy to find in the blob stores, Virtual Client supports defining a flexible blob path template. The virtual path
location of files/content in the storage account can be defined using the <code>--contentPathTemplate</code> command line option.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># By default files/content uploaded will be saved to a container whose name matches the experiment ID for</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># the Virtual Client run.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># However, the location can be explicitly defined using the content path template.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">./VirtualClient </span><span class="token parameter variable" style="color:#cb4b16">--profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF-CPU-OPENSSL.json </span><span class="token punctuation" style="color:#657b83">..</span><span class="token plain">. </span><span class="token parameter variable" style="color:#cb4b16">--contentPathTemplate</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;{experimentId}/logs/{toolName}/{scenarioName}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>In above example, the virtual blob folder structure will have sub-folders corresponding to each element separated by a &#x27;/&#x27; in the content path template defined.
This template is using different supported template placeholders (e.g. the parts in {xyz} brackets). These template placeholder values (e.g. {experimentId}, {scenario}),
will be replaced at runtime with appropriate values. Note that the directory path segments in the final virtual path will be entirely lower-cased. Azure storage account blob paths
are case-sensitive. Lower-casing helps to ensure predictability.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># </span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Given the following experiment properties:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Experiment ID = 29be58e5-94de-4703-beab-5c8862abcdAa7</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Tool Name     = OpenSSL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Scenario Name = MD5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># ...and a content path template defined</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token parameter variable" style="color:#cb4b16">--contentPathTemplate</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;{experimentId}/logs/{toolName}/{scenarioName}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Files/content would be uploaded to a virtual path in the storage account that looks like the following:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># 29be58e5-94de-4703-beab-5c8862abcdAa7/logs/openssl/md5</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="default-content-path-template">Default Content Path Template<a class="hash-link" aria-label="Direct link to Default Content Path Template" title="Direct link to Default Content Path Template" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#default-content-path-template">​</a></h3>
<p>If a content path template is not defined explicitly on the command line, the default template will be used. The default template is as follows:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Default content path template</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token string" style="color:#8dc891">&quot;{experimentId}/{agentId}/{toolName}/{role}/{scenario}&quot;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="well-known-content-path-template-placeholders">Well-Known Content Path Template Placeholders<a class="hash-link" aria-label="Direct link to Well-Known Content Path Template Placeholders" title="Direct link to Well-Known Content Path Template Placeholders" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#well-known-content-path-template-placeholders">​</a></h3>
<p>The following section shows the set of supported &quot;well-known&quot; content path template placeholders.</p>
<ul>
<li>
<p><strong>{experimentId}</strong><br>
<!-- -->The experiment ID for the Virtual Client execution (e.g. ./VirtualClient --profile=PERF-CPU-OPENSSL.json --experimentId=29be58e5-94de-4703-beab-5c8862abcdAa7 --&gt; 29be58e5-94de-4703-beab-5c8862abcdAa7)</p>
</li>
<li>
<p><strong>{agentId}</strong><br>
<!-- -->The ID of the Virtual Client instance running (e.g. ./VirtualClient --profile=PERF-CPU-OPENSSL.json --agentId=agent1234 --&gt; agent1234).</p>
</li>
<li>
<p><strong>{toolName}</strong><br>
<!-- -->This is the name of the tool/toolset associated with a given workload or monitor (e.g. OpenSSL).</p>
</li>
<li>
<p><strong>{scenarioName}</strong><br>
<!-- -->This is the name of the scenario in a profile associated with a given workload or monitor (e.g. MD5, SHA1).</p>
</li>
<li>
<p><strong>{role}</strong><br>
<!-- -->The client/server role for the Virtual Client instence (e.g. Client, Server). This is relevant only for profiles that execute workloads across multiple systems.</p>
</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="additional-supported-content-path-template-placeholders">Additional Supported Content Path Template Placeholders<a class="hash-link" aria-label="Direct link to Additional Supported Content Path Template Placeholders" title="Direct link to Additional Supported Content Path Template Placeholders" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#additional-supported-content-path-template-placeholders">​</a></h3>
<p>In addition to the &quot;well-known&quot; content path template placeholders, the user can define any number of additional values on the command line using either
the <code>--parameters</code> or <code>--metadata</code> options. The key for any one of the key/value pairs in either of these two command line options can be referenced as
a placeholder in a content path template.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Suppose a content path template is defined on the command line and it references placeholders for </span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># properties defined/supplied in the --metadata (e.g. environment, audience).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">VirtualClient.exe </span><span class="token parameter variable" style="color:#cb4b16">--profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF-CPU-OPENSSL.json </span><span class="token parameter variable" style="color:#cb4b16">--experimentId</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">29be58e5-94de-4703-beab-5c8862abcdAa7 </span><span class="token parameter variable" style="color:#cb4b16">--agentId</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">agent1234 </span><span class="token parameter variable" style="color:#cb4b16">--contentPathTemplate</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;{environment}/{audience}/{experimentId}/{agentId}/{toolName}/{scenarioName}&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--metadata</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;environment=demo,,,audience=my_team&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># The custom placeholders defined in the metadata will be resolved at runtime and replaced</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># in the virtual paths for the blobs/files (e.g. {environment} --&gt; demo, {audience} --&gt; my_team)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># The following shows what the virtual paths might look like.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">demo/my_team/29be58e5-94de-4703-beab-5c8862abcdAa7/agent1234/openssl/md5/2022-03-07T01:32:27.1237655Z-md5.log</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">demo/my_team/29be58e5-94de-4703-beab-5c8862abcdAa7/agent1234/openssl/md5/2022-03-07T02:20:45.4673920Z-md5.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="content-upload-file-naming-conventions">Content Upload File Naming Conventions<a class="hash-link" aria-label="Direct link to Content Upload File Naming Conventions" title="Direct link to Content Upload File Naming Conventions" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#content-upload-file-naming-conventions">​</a></h3>
<p>The following section provides additional context information related to content file uploads.</p>
<ul>
<li>
<p><strong>File Naming Conventions</strong><br>
<!-- -->In order to ensure each file within the storage account is unique a timestamp will be added to the name of the file. This helps to avoid collisions in file
names that could result in a given blob/file being overwritten unexpectedly. Timestamps added to file names will be in &quot;universal round trip&quot; date/time format
(e.g. monitor.log --&gt; 2023-08-17t0637583781z-monitor.log).</p>
<p>This is the name of the file as it should be reflected in the blob store. A timestamp (round-trip date/time format) will be added to the beginning of the file name
(e.g. 2023-08-17t0637583781z-monitor.log). Universal round-trip date/time formats have the additional benefit of being naturally sortable in U/X experiences
such as a web browser.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Suppose the following content path template is defined on the command line:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">VirtualClient.exe </span><span class="token parameter variable" style="color:#cb4b16">--profile</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">PERF-CPU-OPENSSL.json </span><span class="token parameter variable" style="color:#cb4b16">--experimentId</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">29be58e5-94de-4703-beab-5c8862abcdAa7 </span><span class="token parameter variable" style="color:#cb4b16">--agentId</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">agent1234 </span><span class="token parameter variable" style="color:#cb4b16">--contentPathTemplate</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;{environment}/{audience}/{experimentId}/{agentId}/{toolName}/{scenarioName}&quot;</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--metadata</span><span class="token operator" style="color:#fc929e">=</span><span class="token string" style="color:#8dc891">&quot;environment=demo,,,audience=my_team&quot;</span><span class="token plain"> </span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># The following shows examples of what the virtual paths files uploaded might look like. The blob container</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># is the very first segment in the content path template (e.g. demo).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">demo/my_team/29be58e5-94de-4703-beab-5c8862abcdAa7/agent1234/openssl/md5/2022-03-07T01:32:27.1237655Z-md5.log</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">demo/my_team/29be58e5-94de-4703-beab-5c8862abcdAa7/agent1234/openssl/md5/2022-03-07T02:20:45.4673920Z-md5.log</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">demo/my_team/29be58e5-94de-4703-beab-5c8862abcdAa7/agent1234/openssl/sha256/2022-03-07T01:40:10.6382906Z-sha256.log</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">demo/my_team/29be58e5-94de-4703-beab-5c8862abcdAa7/agent1234/openssl/sha256/2022-03-07T02:56:11.3975286Z-sha256.log</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="integration-with-the-development-process">Integration with the Development Process<a class="hash-link" aria-label="Direct link to Integration with the Development Process" title="Direct link to Integration with the Development Process" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#integration-with-the-development-process">​</a></h2>
<p>This section describes how access to the supported blob stores can be integrated into the Virtual Client process.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="how-blob-stores-are-integrated-into-dependencies">How Blob Stores are Integrated into Dependencies<a class="hash-link" aria-label="Direct link to How Blob Stores are Integrated into Dependencies" title="Direct link to How Blob Stores are Integrated into Dependencies" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#how-blob-stores-are-integrated-into-dependencies">​</a></h3>
<p>When the Virtual Client reads the blob stores (i.e. connection strings) from the command line, it will place a set of
BlobStore objects into the dependencies collection that is passed into the constructors of ALL profile actions, dependencies
and monitors.</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// In the CommandBase class in the Main project</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token class-name" style="color:#fac863">List</span><span class="token class-name punctuation" style="color:#657b83">&lt;</span><span class="token class-name" style="color:#fac863">BlobStore</span><span class="token class-name punctuation" style="color:#657b83">&gt;</span><span class="token plain"> blobStores </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name" style="color:#fac863">List</span><span class="token constructor-invocation class-name punctuation" style="color:#657b83">&lt;</span><span class="token constructor-invocation class-name" style="color:#fac863">BlobStore</span><span class="token constructor-invocation class-name punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ContentBlobStore </span><span class="token operator" style="color:#fc929e">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    blobStores</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">Add</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ContentBlobStore</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">PackagesBlobStore </span><span class="token operator" style="color:#fc929e">!=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    blobStores</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">Add</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">PackagesBlobStore</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token class-name" style="color:#fac863">IServiceCollection</span><span class="token plain"> dependencies </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name" style="color:#fac863">ServiceCollection</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token range operator" style="color:#fc929e">..</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">dependencies</span><span class="token punctuation" style="color:#657b83">.</span><span class="token generic-method function" style="color:#79b6f2">AddSingleton</span><span class="token generic-method generic class-name punctuation" style="color:#657b83">&lt;</span><span class="token generic-method generic class-name" style="color:#fac863">IEnumerable</span><span class="token generic-method generic class-name punctuation" style="color:#657b83">&lt;</span><span class="token generic-method generic class-name" style="color:#fac863">BlobStore</span><span class="token generic-method generic class-name punctuation" style="color:#657b83">&gt;</span><span class="token generic-method generic class-name punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">blobStores</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>Each of the BlobStore instances describes a single blob store that can be then used within any of the components described
in the profile. To use upload or download blobs from one of the stores, create a BlobManager instance. The blob manager has
simple download and upload methods available.</p>
<p><a href="https://github.com/microsoft/VirtualClient/blob/main/src/VirtualClient/VirtualClient.Monitors/ExampleMonitorWithBlobUploadIntegration.cs" target="_blank" rel="noopener noreferrer">Example Implementation/Usage</a></p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1">// Using the example implementation noted above:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">// Get the blob store reference and create a BlobManager to upload blobs to the store.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">TryGetContentStore</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">out</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">BlobStore</span><span class="token plain"> contentStore</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token class-name" style="color:#fac863">DateTime</span><span class="token plain"> snapshotTime </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> DateTime</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">UtcNow</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token class-name" style="color:#fac863">IBlobManager</span><span class="token plain"> blobManager </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name" style="color:#fac863">BlobManager</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">contentStore</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ConnectionString</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1">// For this example, assume there is a file that contains the output of some monitoring</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1">// toolset. We want to upload this file to the content blob store.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token keyword" style="color:#c5a5c5">using</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token class-name" style="color:#fac863">FileStream</span><span class="token plain"> uploadStream </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name" style="color:#fac863">FileStream</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">resultsFilePath</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> FileMode</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">Open</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> FileAccess</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">Read</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> FileShare</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">Read</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token class-name" style="color:#fac863">BlobDescriptor</span><span class="token plain"> resultsBlob </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token constructor-invocation class-name" style="color:#fac863">BlobDescriptor</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">// For this scenario, we have a folder structure and naming convention for each of the blobs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">// that is specific to the monitor but that also allows for consecutive blobs to be uploaded without</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">// overwriting previously uploaded blobs.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">// Example:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">// Given an experiment ID = 24149a49-66c9-4bd1-9332-18370c7c70e1 and an Agent ID = cluster01,cc296787-aee6-4ce4-b814-180627508d12,anyvm-01:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">//</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token comment" style="color:#93a1a1">// Format = 24149a49-66c9-4bd1-9332-18370c7c70e1/cluster01,cc296787-aee6-4ce4-b814-180627508d12,anyvm-01/examplemonitor/2022-03-07T01:32:27.1237655Z-monitor.log</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            BlobName </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> BlobDescriptor</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">ToPath</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">ExperimentId</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">AgentId</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;examplemonitor&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;monitor.log&quot;</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            ContainerName </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;monitors&quot;</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            ContentEncoding </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> Encoding</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">UTF8</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            ContentType </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&quot;text/plain&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">        </span><span class="token keyword" style="color:#c5a5c5">await</span><span class="token plain"> blobManager</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">UploadBlobAsync</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">resultsBlob</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> uploadStream</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> cancellationToken</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">            </span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">ConfigureAwait</span><span class="token punctuation" style="color:#657b83">(</span><span class="token boolean" style="color:#ff8b50">false</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/microsoft/VirtualClient/edit/main/website/docs/guides/0600-integration-blob-storage.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/VirtualClient/docs/guides/0221-usage-extensions/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Using/Integrating Extensions</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/VirtualClient/docs/guides/0610-integration-event-hub/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Azure Event Hub Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#supported-blob-stores">Supported Blob Stores</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#authentication-preliminaries">Authentication Preliminaries</a><ul><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#referencing-certificates-on-linux">Referencing Certificates on Linux</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#blob-store-authentication">Blob Store Authentication</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#storage-account-blob-conventions-for-contentfile-uploads">Storage Account Blob Conventions for Content/File Uploads</a><ul><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#default-content-path-template">Default Content Path Template</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#well-known-content-path-template-placeholders">Well-Known Content Path Template Placeholders</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#additional-supported-content-path-template-placeholders">Additional Supported Content Path Template Placeholders</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#content-upload-file-naming-conventions">Content Upload File Naming Conventions</a></li></ul></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#integration-with-the-development-process">Integration with the Development Process</a><ul><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/guides/0600-integration-blob-storage/#how-blob-stores-are-integrated-into-dependencies">How Blob Stores are Integrated into Dependencies</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/docs/overview/">Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://microsoft.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2024 Microsoft.</div></div></div></footer></div>
</body>
</html>