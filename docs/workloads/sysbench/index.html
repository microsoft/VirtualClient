<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-workloads/sysbench/sysbench" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.4.0">
<title data-rh="true">Sysbench | Virtual Client Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/VirtualClient/docs/workloads/sysbench/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="performance, benchmarking, automation, framework, microsoft"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Sysbench | Virtual Client Platform"><meta data-rh="true" name="description" content="Sysbench is an open-source multi-threaded database benchmark tool for database online transacation processing (OLTP) operations against a"><meta data-rh="true" property="og:description" content="Sysbench is an open-source multi-threaded database benchmark tool for database online transacation processing (OLTP) operations against a"><link data-rh="true" rel="icon" href="/VirtualClient/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/VirtualClient/docs/workloads/sysbench/"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/workloads/sysbench/" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/workloads/sysbench/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0I7D8A07MA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/VirtualClient/blog/rss.xml" title="Virtual Client Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/VirtualClient/blog/atom.xml" title="Virtual Client Platform Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Virtual Client Platform" href="/VirtualClient/opensearch.xml"><link rel="stylesheet" href="/VirtualClient/assets/css/styles.fe082272.css">
<script src="/VirtualClient/assets/js/runtime~main.d105bffb.js" defer="defer"></script>
<script src="/VirtualClient/assets/js/main.78f43021.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like VirtualClient, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/VirtualClient">GitHub</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/VirtualClient/"><div class="navbar__logo"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Virtual Client</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/VirtualClient/docs/overview/">Documentation</a><a class="navbar__item navbar__link" href="/VirtualClient/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20" aria-hidden="true"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/overview/">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/guides/">Guides</a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="/VirtualClient/docs/category/workloads/">Workloads</a><button aria-label="Collapse sidebar category &#x27;Workloads&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/3dmark/">3DMark TimeSpy</a><button aria-label="Expand sidebar category &#x27;3DMark TimeSpy&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/aspnetbench/">AspNetBenchmark</a><button aria-label="Expand sidebar category &#x27;AspNetBenchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/blenderbenchmark/">Blender Benchmark</a><button aria-label="Expand sidebar category &#x27;Blender Benchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/compression/">Compression</a><button aria-label="Expand sidebar category &#x27;Compression&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/coremark/">CoreMark</a><button aria-label="Expand sidebar category &#x27;CoreMark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/dcgmi/">DCGMI</a><button aria-label="Expand sidebar category &#x27;DCGMI&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/deathstarbench/">DeathStarBench</a><button aria-label="Expand sidebar category &#x27;DeathStarBench&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/diskspd/">DiskSpd</a><button aria-label="Expand sidebar category &#x27;DiskSpd&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/fio/">Flexible IO Tester (FIO)</a><button aria-label="Expand sidebar category &#x27;Flexible IO Tester (FIO)&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/geekbench/">GeekBench</a><button aria-label="Expand sidebar category &#x27;GeekBench&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/graph500/">Graph500</a><button aria-label="Expand sidebar category &#x27;Graph500&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/hammerdb/">PostgreSQL</a><button aria-label="Expand sidebar category &#x27;PostgreSQL&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/hpcg/">HPCG</a><button aria-label="Expand sidebar category &#x27;HPCG&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/hplinpack/">HPLINPACK</a><button aria-label="Expand sidebar category &#x27;HPLINPACK&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/lapack/">LAPACK</a><button aria-label="Expand sidebar category &#x27;LAPACK&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/lmbench/">LMbench</a><button aria-label="Expand sidebar category &#x27;LMbench&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/memcached/">Memcached</a><button aria-label="Expand sidebar category &#x27;Memcached&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/mlperf/">MLPerf</a><button aria-label="Expand sidebar category &#x27;MLPerf&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/nasparallel/">NAS Parallel</a><button aria-label="Expand sidebar category &#x27;NAS Parallel&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/network-ping/">Network Ping/ICMP</a><button aria-label="Expand sidebar category &#x27;Network Ping/ICMP&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/network-suite/">Network Suite</a><button aria-label="Expand sidebar category &#x27;Network Suite&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/openfoam/">OpenFOAM</a><button aria-label="Expand sidebar category &#x27;OpenFOAM&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/openssl/">OpenSSL</a><button aria-label="Expand sidebar category &#x27;OpenSSL&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/prime95/">Prime95</a><button aria-label="Expand sidebar category &#x27;Prime95&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/redis/">Redis</a><button aria-label="Expand sidebar category &#x27;Redis&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/speccpu/">SPECcpu</a><button aria-label="Expand sidebar category &#x27;SPECcpu&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/specjbb/">SPECjbb</a><button aria-label="Expand sidebar category &#x27;SPECjbb&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/specjvm/">SPECjvm</a><button aria-label="Expand sidebar category &#x27;SPECjvm&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/specpower/">SPECpower</a><button aria-label="Expand sidebar category &#x27;SPECpower&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/specview/">SPECviewperf</a><button aria-label="Expand sidebar category &#x27;SPECviewperf&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/stress-ng/">Stress-ng</a><button aria-label="Expand sidebar category &#x27;Stress-ng&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/stressapptest/">StressAppTest</a><button aria-label="Expand sidebar category &#x27;StressAppTest&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" tabindex="0" href="/VirtualClient/docs/workloads/superbenchmark/">SuperBenchmark</a><button aria-label="Expand sidebar category &#x27;SuperBenchmark&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible menu__list-item-collapsible--active"><a class="menu__link menu__link--sublist menu__link--active" aria-current="page" tabindex="0" href="/VirtualClient/docs/workloads/sysbench/">Sysbench</a><button aria-label="Collapse sidebar category &#x27;Sysbench&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/workloads/sysbench/sysbench-addendum/">Sysbench Client/Server Addendum</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/workloads/sysbench/sysbench-profiles/">Sysbench Workload Profiles</a></li></ul></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/monitors/">Monitors</a><button aria-label="Expand sidebar category &#x27;Monitors&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/dependencies/">Dependencies</a><button aria-label="Expand sidebar category &#x27;Dependencies&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="/VirtualClient/docs/category/developing/">Developing</a><button aria-label="Expand sidebar category &#x27;Developing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/VirtualClient/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/VirtualClient/docs/category/workloads/"><span itemprop="name">Workloads</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Sysbench</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Sysbench</h1>
<p>Sysbench is an open-source multi-threaded database benchmark tool for database online transacation processing (OLTP) operations against a
MySQL database.</p>
<ul>
<li><a href="https://github.com/akopytov/sysbench" target="_blank" rel="noopener noreferrer">Sysbench GitHub</a></li>
<li><a href="https://www.flamingbytes.com/posts/sysbench/" target="_blank" rel="noopener noreferrer">Example Sysbench Uses</a></li>
</ul>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-being-measured">What is Being Measured?<a class="hash-link" aria-label="Direct link to What is Being Measured?" title="Direct link to What is Being Measured?" href="/VirtualClient/docs/workloads/sysbench/#what-is-being-measured">​</a></h2>
<p>The Sysbench test suite executes varied transactions on the database system including reads, writes, and other queries. The list of OLTP benchmarks
supported by Sysbench are as follows:</p>
<table><thead><tr><th>Benchmark Name</th><th>Description</th></tr></thead><tbody><tr><td>oltp_read_write</td><td>Measures performance of read and write queries on MySQL database</td></tr><tr><td>oltp_read_only</td><td>Measures performance of only read queries on MySQL database</td></tr><tr><td>oltp_write_only</td><td>Measures performance of only write queries on MySQL database</td></tr><tr><td>oltp_delete</td><td>Measures performance of only delete queries on the MySQL database</td></tr><tr><td>oltp_insert</td><td>Measures performance of only insert queries on MySQL database</td></tr><tr><td>oltp_update_index</td><td>Measures performance of index updates on the MySQL database</td></tr><tr><td>oltp_update_non_index</td><td>Measures performance of non-index updates on the MySQL database</td></tr><tr><td>select_random_points</td><td>Measures performance of random point select on the MySQL database</td></tr><tr><td>select_random_ranges</td><td>Measures performance of random range select on the MySQL database</td></tr><tr><td>tpcc</td><td>Runs the TPCC workload on the MySQL database. <strong>Only TPCC Workload Available</strong></td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="workload-metrics">Workload Metrics<a class="hash-link" aria-label="Direct link to Workload Metrics" title="Direct link to Workload Metrics" href="/VirtualClient/docs/workloads/sysbench/#workload-metrics">​</a></h2>
<p>The following metrics are examples of those captured by the Virtual Client when running the Sysbench OLTP workload</p>
<table><thead><tr><th>Execution Profile</th><th>Test Name</th><th>Metric Name</th><th>Example Value</th></tr></thead><tbody><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># read queries</td><td>5503894</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># write queries</td><td>259534</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># other queries</td><td>1284332</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># transactions</td><td>257421</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>transactions/sec</td><td>153.01</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># queries</td><td>5948220</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>queries/sec</td><td>2850.17</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># ignored errors</td><td>0</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>ignored errors/sec</td><td>0.00</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td># reconnects</td><td>0</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>reconnects/sec</td><td>0.00</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>elapsed time</td><td>1800.0012</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>latency min</td><td>7.19</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>latency avg</td><td>26.97</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>latency max</td><td>682.33</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>latency 95p</td><td>67.58</td></tr><tr><td>PERF-MYSQL-SYSBENCH-OLTP.json</td><td>Sysbench OLTP</td><td>latency sum</td><td>7458935.25</td></tr></tbody></table>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="useful-mysql-server-commands">Useful MySQL Server Commands<a class="hash-link" aria-label="Direct link to Useful MySQL Server Commands" title="Direct link to Useful MySQL Server Commands" href="/VirtualClient/docs/workloads/sysbench/#useful-mysql-server-commands">​</a></h2>
<p>The following section contains commands that were useful when onboarding this workload that help in the process of investigations and debugging.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Show MySQL server online status. Use the password for the current logged in user.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">/etc/init.d/mysql status</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> mysqladmin </span><span class="token parameter variable" style="color:#cb4b16">-p</span><span class="token plain"> status</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show MySQL service/daemon status.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> systemctl status mysql.service</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># or</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> systemctl </span><span class="token parameter variable" style="color:#cb4b16">--type</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">service </span><span class="token operator" style="color:#fc929e">|</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">grep</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show user/account under which the MySQL service is running.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">systemctl show </span><span class="token parameter variable" style="color:#cb4b16">-p</span><span class="token plain"> </span><span class="token environment constant" style="color:#5a9bcf">UID</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-p</span><span class="token plain"> User mysql.service</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show all users for a MySQL Server. Sysbench requires the user match the name of the database (e.g. sbtest).</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> SELECT User, Host, Select_priv, Insert_priv, Update_priv, Delete_priv, Create_priv, Drop_priv, File_priv, Grant_priv, References_priv, Index_priv, Alter_priv, Show_db_priv, Super_priv FROM mysql.user</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show current user</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> SELECT user</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># List MySQL database table fields</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> desc mysql.user</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> Use sbtest</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> desc sbtest.sbtest1</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show the information schema tables for the database.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> Use information_schema</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> SHOW TABLES</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Drop sysbench database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ ./sysbench oltp_common </span><span class="token parameter variable" style="color:#cb4b16">--threads</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--tables</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">10</span><span class="token plain"> --table-size</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> --mysql-db</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">sbtest --mysql-host</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">localhost cleanup</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Create sysbench database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ ./sysbench oltp_common </span><span class="token parameter variable" style="color:#cb4b16">--threads</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--tables</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">10</span><span class="token plain"> --table-size</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> --mysql-db</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">sbtest --mysql-host</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">localhost prepare</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show MySQL configuration file contents</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ </span><span class="token function" style="color:#79b6f2">cat</span><span class="token plain"> /etc/mysql/mysql.conf.d/mysqld.cnf</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Show MySQL database tables (i.e. sbtest1.ibd, sbtest2.ibd, sbtest3.ibd...)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ </span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ls</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-a</span><span class="token plain"> /var/lib/mysql/sbtest</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="creating-and-distributing-a-sysbench-database">Creating and Distributing a Sysbench Database<a class="hash-link" aria-label="Direct link to Creating and Distributing a Sysbench Database" title="Direct link to Creating and Distributing a Sysbench Database" href="/VirtualClient/docs/workloads/sysbench/#creating-and-distributing-a-sysbench-database">​</a></h2>
<p>The following process can be used to create and then move the sysbench database. Virtual Client programmatically does then whenever there are extra disks on the
system beyond the OS disk.</p>
<ul>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/option-files.html" target="_blank" rel="noopener noreferrer">MySQL Option Files</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/innodb-moving-data-files-offline.html" target="_blank" rel="noopener noreferrer">Moving Data Files Offline</a></li>
</ul>
<p>The following steps show how to create the Sysbench database and then move/distribute it across multiple disks.</p>
<ul>
<li>
<p><strong>Set &#x27;innodb_directories&#x27; variable in mysqld.cnf (e.g. /etc/mysql/mysql.conf.d/mysqld.cnf)</strong><br>
<!-- -->This variable must be set to instruct the innodb engine to look for database table files in a location other
than the default data directory.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Set &#x27;innodb_directories&#x27; variable in mysqld.cnf (e.g. /etc/mysql/mysql.conf.d/mysqld.cnf)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># e.g.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Here is entries for some specific programs</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># The following values assume you have at least 32M ram</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain">mysqld</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># * Basic Settings</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1">#</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">user          </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> mysql</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">pid-file      </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> /var/run/mysqld/mysqld.pid</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">socket        </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> /var/run/mysqld/mysqld.sock</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">port          </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">3306</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">datadir       </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> /var/lib/mysql</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token assign-left variable" style="color:#cb4b16">innodb_directories</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">/home/junovmadmin/mnt_vc/sdc1</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain">/home/junovmadmin/mnt_vc/sdd1</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain">/home/junovmadmin/mnt_vc/sde1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Disable Apparmor for the MySQL server (i.e. for the mysqld service)</strong></p>
<p>The Apparmor service will prevent the MySQL server service from having permissions to create the Sysbench database table
files on the data disk location. You will know when Apparmor is preventing MySQL from creating the table files because you
will receive the following error:</p>
<p>ERROR 1030 (HY000): Got error 168 - &#x27;Unknown (generic) error from engine&#x27; from storage engine</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Disable Apparmor for MySQL</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> </span><span class="token function" style="color:#79b6f2">ln</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">-s</span><span class="token plain"> /etc/apparmor.d/usr.sbin.mysqld /etc/apparmor.d/disable/</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> apparmor_parser </span><span class="token parameter variable" style="color:#cb4b16">-R</span><span class="token plain"> /etc/apparmor.d/usr.sbin.mysqld</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Verify that MySQL is no longer in the list of protected apps. If MySQL is disabled, you should not see &#x27;/var/lib/mysql&#x27; in the</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># output of the following command.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token function" style="color:#79b6f2">sudo</span><span class="token plain"> aa-status</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Update SQL &#x27;Create&#x27; command in Sysbench oltp_common.lua file</strong><br>
<!-- -->In the Sysbench repo directory (after compilation), change the /src/lua/oltp_common.lua file to use an SQL &#x27;CREATE IF NOT EXISTS&#x27;
statement vs. a &#x27;CREATE&#x27; statement. The latter will cause Sysbench to fail when attempting to populate an existing database in steps
below.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># The script file will look like this before the change.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">CREATE TABLE sbtest%d</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">id</span><span class="token plain"> %s,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  k INTEGER DEFAULT </span><span class="token string" style="color:#8dc891">&#x27;0&#x27;</span><span class="token plain"> NOT NULL,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  c CHAR</span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">120</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> DEFAULT </span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token plain"> NOT NULL,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  pad CHAR</span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">60</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> DEFAULT </span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token plain"> NOT NULL,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  %s </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># It should look like this afterwards. Note we have added the &#x27;IF NOT EXISTS&#x27; clause.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">CREATE TABLE IF NOT EXISTS sbtest%d</span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  </span><span class="token function" style="color:#79b6f2">id</span><span class="token plain"> %s,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  k INTEGER DEFAULT </span><span class="token string" style="color:#8dc891">&#x27;0&#x27;</span><span class="token plain"> NOT NULL,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  c CHAR</span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">120</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> DEFAULT </span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token plain"> NOT NULL,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  pad CHAR</span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">60</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> DEFAULT </span><span class="token string" style="color:#8dc891">&#x27;&#x27;</span><span class="token plain"> NOT NULL,</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">  %s </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">id</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Create a very small/minimal Sysbench database</strong><br>
<!-- -->We have to use sysbench to create the database. However, we only want to create a database with schema and a bare minimum
number of records, so that we can efficiently move it afterwards. Unfortunately, Sysbench is going to create the database
in the default data directory location. Out of box, that is the OS drive.</p>
<p>Note that the settings used here for --tables should match the number of tables ultimately desired. In a later step below, we
are populating the database tables. The number of tables defined here should match between both steps.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Drop an existing Sysbench database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ ./sysbench oltp_common </span><span class="token parameter variable" style="color:#cb4b16">--threads</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--tables</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">10</span><span class="token plain"> --table-size</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> --mysql-db</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">sbtest --mysql-host</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">localhost cleanup</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token comment" style="color:#93a1a1"># Create Sysbench database</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ ./sysbench oltp_common </span><span class="token parameter variable" style="color:#cb4b16">--threads</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--tables</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">10</span><span class="token plain"> --table-size</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> --mysql-db</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">sbtest --mysql-host</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">localhost prepare</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Create exact copies of the Sysbench table files on the target data disk(s)</strong><br>
<!-- -->The process here involves copying the table files (e.g. sbtest1.ibd, sbtest2.ibd...) to the data disk locations using a different
name for the table, dropping the original and then renaming the tables copied to the original names (e.g. sbtest1_move -&gt; sbtest1).</p>
<div class="language-csharp codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-csharp codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token preprocessor property" style="color:#2aa198"># Open the MySQL console.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">sudo mysql</span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token preprocessor property" style="color:#2aa198"># Copy the table files to the new disk locations using out-of-box SQL commands. In this example we are distributing</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain"></span><span class="token preprocessor property" style="color:#2aa198"># 10 tables across 3 disks/locations.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest1_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdc1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest1</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest2_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdc1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest2</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest3_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdc1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest3</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest4_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdc1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest4</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest5_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdd1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest5</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest6_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdd1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest6</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest7_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sdd1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest7</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest8_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sde1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest8</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest9_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sde1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest9</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> CREATE TABLE sbtest10_move </span><span class="token class-name" style="color:#fac863">DATA</span><span class="token plain"> DIRECTORY </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> &#x27;</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">home</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">junovmadmin</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">mnt_vc</span><span class="token operator" style="color:#fc929e">/</span><span class="token plain">sde1&#x27; AS </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain">SELECT </span><span class="token operator" style="color:#fc929e">*</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">FROM</span><span class="token plain"> sbtest10</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Drop the original Sysbench tables</strong><br>
<!-- -->We will drop the original tables first so they are deleted from the original location. In this example, we have 10
total Sysbench tables to drop.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest1</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest2</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest3</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest4</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest5</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest6</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest7</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest8</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest9</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> DROP TABLE sbtest10</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Rename the tables copied to the original table names (i.e. matching the ones just dropped)</strong><br>
<!-- -->Once the previous tables have been dropped/deleted, we can simply rename the copied tables to the original
names and we will have effectively moved the database.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest1_move TO sbtest1</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest2_move TO sbtest2</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest3_move TO sbtest3</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest4_move TO sbtest4</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest5_move TO sbtest5</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest6_move TO sbtest6</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest7_move TO sbtest7</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest8_move TO sbtest8</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest9_move TO sbtest9</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">mysql</span><span class="token operator" style="color:#fc929e">&gt;</span><span class="token plain"> RENAME TABLE sbtest10_move TO sbtest10</span><span class="token punctuation" style="color:#657b83">;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
</li>
<li>
<p><strong>Populate the Sysbench database with the desired amount of data</strong><br>
<!-- -->We created a minimal sized Sysbench database in earlier steps so that we could efficiently move it and distribute the table files across
the data disks. In this step we populate the database with the full set of records.</p>
<p>Note here that the value used for --tables in the step above where we created the initial database before moving it should match here.</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#FFFFFF;--prism-background-color:#282C34"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#FFFFFF;background-color:#282C34"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#FFFFFF"><span class="token comment" style="color:#93a1a1"># Fully populate the Sysbench database with records.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#FFFFFF"><span class="token plain">~/vc_tools/sysbench/src$ ./sysbench oltp_common </span><span class="token parameter variable" style="color:#cb4b16">--threads</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">1</span><span class="token plain"> </span><span class="token parameter variable" style="color:#cb4b16">--tables</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">10</span><span class="token plain"> --table-size</span><span class="token operator" style="color:#fc929e">=</span><span class="token number" style="color:#5a9bcf">100000</span><span class="token plain"> --mysql-db</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">sbtest --mysql-host</span><span class="token operator" style="color:#fc929e">=</span><span class="token plain">localhost prepare</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>For reference, the approximate size of a database created by Sysbench for a 10-table database is 1MB + 10kB per record.</p>
</li>
</ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/microsoft/VirtualClient/edit/main/website/docs/workloads/sysbench/sysbench.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/VirtualClient/docs/workloads/superbenchmark/superbenchmark-profiles/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">SuperBenchmark Workload Profiles</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/VirtualClient/docs/workloads/sysbench/sysbench-addendum/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Sysbench Client/Server Addendum</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/workloads/sysbench/#what-is-being-measured">What is Being Measured?</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/workloads/sysbench/#workload-metrics">Workload Metrics</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/workloads/sysbench/#useful-mysql-server-commands">Useful MySQL Server Commands</a></li><li><a class="table-of-contents__link toc-highlight" href="/VirtualClient/docs/workloads/sysbench/#creating-and-distributing-a-sysbench-database">Creating and Distributing a Sysbench Database</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/docs/overview/">Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://microsoft.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2024 Microsoft.</div></div></div></footer></div>
</body>
</html>