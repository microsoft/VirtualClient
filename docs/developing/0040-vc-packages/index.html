<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-developing/0040-vc-packages" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.0.0">
<title data-rh="true">VC Packages | Virtual Client Platform</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://microsoft.github.io/VirtualClient/docs/developing/0040-vc-packages/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="keywords" content="performance, benchmarking, automation, framework, microsoft"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="VC Packages | Virtual Client Platform"><meta data-rh="true" name="description" content="The following documentation covers the different package store options available in Virtual Client used for downloading and installing"><meta data-rh="true" property="og:description" content="The following documentation covers the different package store options available in Virtual Client used for downloading and installing"><link data-rh="true" rel="icon" href="/VirtualClient/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://microsoft.github.io/VirtualClient/docs/developing/0040-vc-packages/"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/developing/0040-vc-packages/" hreflang="en"><link data-rh="true" rel="alternate" href="https://microsoft.github.io/VirtualClient/docs/developing/0040-vc-packages/" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://0I7D8A07MA-dsn.algolia.net" crossorigin="anonymous"><link rel="alternate" type="application/rss+xml" href="/VirtualClient/blog/rss.xml" title="Virtual Client Platform RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/VirtualClient/blog/atom.xml" title="Virtual Client Platform Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Virtual Client Platform" href="/VirtualClient/opensearch.xml"><link rel="stylesheet" href="/VirtualClient/assets/css/styles.9af2558c.css">
<script src="/VirtualClient/assets/js/runtime~main.255bc540.js" defer="defer"></script>
<script src="/VirtualClient/assets/js/main.cea975e9.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" role="banner"><div class="announcementBarPlaceholder_vyr4"></div><div class="content_knG7 announcementBarContent_xLdY">⭐️ If you like VirtualClient, give it a star on <a target="_blank" rel="noopener noreferrer" href="https://github.com/microsoft/VirtualClient">GitHub</a> ⭐️</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/VirtualClient/"><div class="navbar__logo"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/vc-logo.png" alt="My Site Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Virtual Client</b></a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/VirtualClient/docs/overview/">Documentation</a><a class="navbar__item navbar__link" href="/VirtualClient/blog/">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/VirtualClient/docs/category/overview/">Overview</a><button aria-label="Expand sidebar category &#x27;Overview&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/VirtualClient/docs/category/guides/">Guides</a><button aria-label="Expand sidebar category &#x27;Guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/VirtualClient/docs/category/workloads/">Workloads</a><button aria-label="Expand sidebar category &#x27;Workloads&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/VirtualClient/docs/category/monitors/">Monitors</a><button aria-label="Expand sidebar category &#x27;Monitors&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/VirtualClient/docs/category/dependencies/">Dependencies</a><button aria-label="Expand sidebar category &#x27;Dependencies&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/VirtualClient/docs/category/developing/">Developing</a><button aria-label="Collapse sidebar category &#x27;Developing&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0001-ci-cd/">Automated Build and CI/CD pipeline</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0010-develop-guide/">Developer Guide</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0020-develop-extensions/">Developing Extensions</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0021-run-custom-scripts/">Run Custom Scripts with Virtual Client</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0030-workload-onboarding/">Workload Onboarding Process</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/VirtualClient/docs/developing/0040-vc-packages/">VC Packages</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0050-develop-profiling-monitor/">Profiler Integration</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0060-workload-recommendations/">Workload Selection Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0061-build-docker-container/">Building Docker Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0070-error-handling/">Error Handling Recommendations</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0080-coding-standards/">Coding Standards</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/VirtualClient/docs/developing/0090-testing/">Testing Practices</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/VirtualClient/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/VirtualClient/docs/category/developing/"><span itemprop="name">Developing</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">VC Packages</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1 id="vc-packages">VC Packages</h1>
<p>The following documentation covers the different package store options available in Virtual Client used for downloading and installing
dependencies on the system. Virtual Client supports NuGet feeds as well as Azure Blob stores for hosting dependency packages that need
to be downloaded to the system during the execution of a workload profile. The following sections describes how this works in the Virtual
Client.</p>
<p>There are a few different types of packages to keep in mind from a general sense: Virtual Client packages (vcpkg) and packages inherent to
the OS platform and that are downloaded/installed on the system using common package managers (e.g. apt, debian, chocolatey). The documentation
below covers packages specifically created for direct integration with the Virtual Client.</p>
<h2 id="virtual-client-packages-vcpkg">Virtual Client Packages (*.vcpkg)</h2>
<p>Virtual Client packages used by the Virtual Client follow a strict folder schema which is similar to the NuGet package schema. NuGet is well-designed
for the purpose of defining dependency packages and additionally has plenty of tooling support that can be easily integrated into the user local development
process as well as the automated/Official build process. This folder schema allows the developer to add support for both cross-platform/OS and cross-architecture/CPU scenarios
in a single package. This consistency makes it easier to integrate these packages into the Virtual Client for just about any type of dependency. It is recommended
that Virtual Client dependency packages be used whenever feasible because they offer the following benefits:</p>
<ul>
<li>
<p><strong>VC Packages ensure consistency in the versions of workloads and monitors to run.</strong><br>
<!-- -->Self-contained packages ensure that it will be the same EXACT software running every single time. This is important to prevent variations in software versions
causing variations in the results/measurements emitted by the software. This is especially important when running VC for longer periods of time with data analysis
at the end...minimizing variables!</p>
</li>
<li>
<p><strong>VC Packages simplify the coding/development requirements.</strong><br>
<!-- -->By pre-packaging dependencies, developers onboarding new features to the Virtual Client remove a significant amount of work that would otherwise need to be done
in code. Writing additional code takes time and creates more places in the codes for bugs.</p>
</li>
<li>
<p><strong>VC Packages help make the runtime dependency installation process more reliable</strong><br>
<!-- -->Additional reliability at runtime is created when placing pre-packaged dependencies in storage locations for which the Virtual Client team or the individual developer own.
This is because it reduces the number of dependencies on which the application must rely in order to install the dependencies it needs. Were the dependencies to be installed
from a third-party location, the application is subject to the availability of those resource locations without an expedient recourse. The Virtual Client team for example uses Azure
storage accounts to host dependency packages because they are highly reliable and can be easily replicated in the case of availability issues/outages.</p>
</li>
<li>
<p><strong>VC Packages enable support for &quot;disconnected&quot; scenarios</strong><br>
<!-- -->Dependency packages can be included with the Virtual Client application (within the /packages directory). If the packages are included, the Virtual Client does
not have to download the dependencies because they are already on the system. This allows the user to run the Virtual Client in scenarios whereby there may not be
an internet connection (e.g. private/local network scenarios).</p>
</li>
</ul>
<h2 id="package-definitions">Package Definitions</h2>
<p>All Virtual Client packages must have a definition file (.vcpkg) in the parent directory. A .vcpkg definition defines the name of the package, version
information and metadata that can be used when implementing components in the Virtual Client that use the packages. As a general rule, the name of the
.vcpkg file should match the name defined inside of it. Additionally, both the file name and the &#x27;name&#x27; within <b>should be lower-cased</b>. This helps avoid
casing issues when running in cross-platform scenarios (e.g. Linux, Windows). This file makes Virtual Client packages self-describing.</p>
<div class="code-section"><pre><code># Example File 1: geekbench5.vcpkg
{
    &quot;name&quot;: &quot;geekbench5&quot;,
    &quot;description&quot;: &quot;GeekBench5 benchmark toolsets.&quot;,
    &quot;metadata&quot;: {}
}

# Example File 2: lshw.vcpkg
{
    &quot;name&quot;: &quot;lshw&quot;,
    &quot;description&quot;: &quot;Hardware lister for Linux toolset.&quot;,
    &quot;version&quot;: &quot;B.02.19.59 &quot;,
    &quot;metadata&quot;: {
        &quot;commit&quot;: &quot;https://github.com/lyonel/lshw/commit/996aaad9c760efa6b6ffef8518999ec226af049a&quot;
    }
}

# Examplele 3: sqlbackupfiles.vcpkg
{
    &quot;name&quot;: &quot;sqlbackupfiles&quot;,
    &quot;description&quot;: &quot;SQL Server database backup files for restoring full databases on the system.&quot;,
    &quot;metadata&quot;: {
        &quot;databaseName&quot;: &quot;tpch1000gcci&quot;,
        &quot;databaseDataFileName&quot;: &quot;tpch1000gcci_root&quot;,
        &quot;databaseLogFileName&quot;: &quot;tpch1000gcci_log&quot;
    }
}
</code></pre></div>
<h2 id="package-naming-conventions">Package Naming Conventions</h2>
<p>With package folder as they exist on the file system, it is best practice to ensure they are always lower-cased. As a general rule this
helps to avoid issues with path conventions between Windows and Unix systems where the former is NOT case-sensitive but the latter IS case-sensitive. It
is simply easier to go with a pattern that works on both by lower-casing your package directory names. You will see this convention in practice in the
examples below.</p>
<h2 id="packages-with-binariesscripts-that-run-anywhere">Packages with Binaries/Scripts that Run Anywhere</h2>
<p>Virtual Client supports certain types of workloads/dependencies that can essentially run on &#x27;any&#x27; platform/architecture that the Virtual Client itself
runs on. For example, certain workloads use the Java runtime to operate. The binaries and scripts should be placed in the parent directory alongside
the .vcpkg file. The following examples illustrate the expected folder structure.</p>
<ul>
<li>
<p>/packageroot</p>
<ul>
<li>packagename.vcpkg</li>
<li>Workload or dependency binaries, scripts etc... that can run on any system.</li>
</ul>
<br>
<br>
<div class="code-section"><pre><code># Example Package Structure 1
# ------------------------------------------------------
# Package = specpower2008.0.0.zip
# Contains the SPEC Power scripts and toolsets that can run on any system (using the Java Runtime/SDK).

# Contents of package folder
/specpower2008.0.0/ccs
/specpower2008.0.0/ssj
/specpower2008.0.0/specpower2008.vcpkg

# Contents of the specpower2008.vcpkg file
{
  &quot;name&quot;: &quot;specpower2008&quot;,
  &quot;description&quot;: &quot;SPEC Power 2008 workload toolsets.&quot;,
  &quot;version&quot;: &quot;2008&quot;,
  &quot;metadata&quot;: {}
}

# Example Package Structure 2
# ------------------------------------------------------
# Package = tpch-1tb.zip
# Contains SQL database backup files that can be used on any system where SQL Server runs.

# Contents of package folder
/tpch-1tb/sqlbackupfiles.vcpkg
/tpch-1tb/TPCH-1TB_001.bak
/tpch-1tb/TPCH-1TB_002.bak
/tpch-1tb/TPCH-1TB_003.bak
/tpch-1tb/TPCH-1TB_004.bak
/tpch-1tb/TPCH-1TB_005.bak
/tpch-1tb/TPCH-1TB_006.bak
/tpch-1tb/TPCH-1TB_007.bak
/tpch-1tb/TPCH-1TB_008.bak
/tpch-1tb/TPCH-1TB_009.bak
/tpch-1tb/TPCH-1TB_010.bak

# Contents of the sqlbackupfiles.vcpkg file
{
  &quot;name&quot;: &quot;sqlbackupfiles&quot;,
  &quot;description&quot;: &quot;SQL Server database backup files for restoring full databases on the system.&quot;,
  &quot;metadata&quot;: {
      &quot;databaseName&quot;: &quot;tpch1000gcci&quot;,
      &quot;databaseDataFileName&quot;: &quot;tpch1000gcci_root&quot;,
      &quot;databaseLogFileName&quot;: &quot;tpch1000gcci_log&quot;
  }
}
</code></pre></div>
</li>
</ul>
<h2 id="packages-with-support-for-different-platformarchitectures">Packages with Support for Different Platform/Architectures</h2>
<p>Virtual Client also supports binaries/scripts that are compiled specific to a set of platform/architectures. For these type of packages, the
folder structure should match the platform/architectures that are supported. The following examples illustrate the expected folder structure.</p>
<ul>
<li>
<p>/packageroot</p>
<ul>
<li>packagename.vcpkg</li>
<li>/linux-arm64<!-- -->
<ul>
<li>Contains workload or dependency binaries, scripts etc... that can run on Linux/ARM64 systems.</li>
</ul>
</li>
<li>/linux-x64<!-- -->
<ul>
<li>Contains workload or dependency binaries, scripts etc... that can run on Linux/x64/amd64 systems.</li>
</ul>
</li>
<li>/win-arm64<!-- -->
<ul>
<li>Contains workload or dependency binaries, scripts etc... that can run on Windows/ARM64 systems.</li>
</ul>
</li>
<li>/win-x64<!-- -->
<ul>
<li>Contains workload or dependency binaries, scripts etc... that can run on Windows/x64/amd64 systems.</li>
</ul>
</li>
</ul>
<br>
<br>
<div class="code-section"><pre><code># Example Package Structure 1
# ------------------------------------------------------
# Package = geekbench5.1.0.0.zip

# Contents of package folder
/geekbench5.1.0.0/geekbench5.vcpkg
/geekbench5.1.0.0/linux-arm64/GeekBench5.preferences
/geekbench5.1.0.0/linux-arm64/geekbench.plar
/geekbench5.1.0.0/linux-arm64/geekbench_aarch64
/geekbench5.1.0.0/linux-arm64/geekbench5
/geekbench5.1.0.0/linux-x64/GeekBench5.preferences
/geekbench5.1.0.0/linux-x64/geekbench.plar
/geekbench5.1.0.0/linux-x64/geekbench_x84_64
/geekbench5.1.0.0/linux-x64/geekbench5
/geekbench5.1.0.0/win-arm64/GeekBench5.preferences
/geekbench5.1.0.0/win-arm64/geekbench.plar
/geekbench5.1.0.0/win-arm64/geekbench_aarch64.exe
/geekbench5.1.0.0/win-arm64/geekbench5
/geekbench5.1.0.0/win-x64/GeekBench5.preferences
/geekbench5.1.0.0/win-x64/geekbench.plar
/geekbench5.1.0.0/win-x64/geekbench_x84_64.exe
/geekbench5.1.0.0/win-x64/geekbench5

# Contents of the geekbench5.vcpkg file
{
  &quot;name&quot;: &quot;geekbench5&quot;,
  &quot;description&quot;: &quot;GeekBench5 benchmark toolsets.&quot;,
  &quot;metadata&quot;: {}
}
</code></pre></div>
</li>
</ul>
<h2 id="zipping-up-your-packages">Zipping Up Your Packages</h2>
<p>Once you have created the folder structure for your package and have placed all of the binaries, scripts, etc... into the folders where you like,
the next step is to zip it up so that it can be uploaded to a package store location (or to a shared folder location on your system or network).
There is a handy PowerShell script in source that makes it very easy and ensures the folder structure within the .zip file created remains exactly
as you defined it. If you have cloned the Virtual Client repo, you will already have the script. You can download it or copy the contents into your own
file if not. Note that this requires PowerShell 7.</p>
<admonition type="note"><blockquote>
<p>Why a Script?<br>
<!-- -->Windows out-of-box &quot;Send to Compressed (zipped) folder&quot; places your directory in a zip file whose name is the same. This duplication of hierarchy is
not desirable which is why the VC team uses the custom PowerShell script noted below</p>
</blockquote></admonition>
<ul>
<li><a href="https://github.com/microsoft/VirtualClient/blob/main/src/VirtualClient/Create-ZipFile.ps1">Create-ZipFile.ps1</a></li>
</ul>
<pre><code class="language-powershell"># Open the PowerShell 7 console and execute the command to zip your package.
C:\source\repos\virtualclient\src\VirtualClient&gt; .\Create-ZipFile &quot;C:\Users\Any\Desktop\customworkload.1.2.3&quot; &quot;C:\Users\Any\Desktop\customworkload.1.2.3.zip&quot;
</code></pre>
<h2 id="what-packages-are-required">What Packages Are Required</h2>
<p>The packages that are used as part of a Virtual Client profile are defined in the &#x27;Dependencies&#x27; section of the profile. If custom package locations
are used, the package name <u>MUST match the name in the profile dependencies</u> (e.g. &#x27;geekbench5&#x27; in the example below).</p>
<div class="code-section"><pre><code># Package names should be lower-cased ALWAYS

&quot;Dependencies&quot;: [
    {
        &quot;Type&quot;: &quot;DependencyPackageInstallation&quot;,
        &quot;Parameters&quot;: {
            &quot;BlobContainer&quot;: &quot;packages&quot;,
            &quot;BlobName&quot;: &quot;geekbench5.1.2.0.zip&quot;,
            &quot;PackageName&quot;: &quot;geekbench5&quot;,
            &quot;Extract&quot;: true
        }
    }
]
</code></pre></div>
<h2 id="package-search-locations-and-priority">Package Search Locations and Priority</h2>
<p>The Virtual Client application supports both packages that exist on the file system as well as the ability to download packages from a store as is
described in the sections that follow. In some cases, it is desirable to deploy packages with the Virtual Client application. The following details
describes the order by which Virtual Client searches for packages and the requirements of each search. Note that packages downloaded from a package
store will be downloaded to the &#x27;packages&#x27; folder and registered (version included).</p>
<ul>
<li>
<p><strong>1) Registered package locations</strong><br>
<!-- -->The Virtual Client allows a developer to register a package/dependency path at runtime. There are cases where this is useful or convenient
for certain scenarios (e.g. installers, installations). A registered package will have a corresponding .vcpkgreg document/definition in the
&#x27;packages&#x27; directory of the Virtual Client application.</p>
<div class="code-section"><pre><code>e.g.
# Location Registered at Runtime: C:\any\custom\package\registration\location\customtoolset\1.0.0

C:\any\custom\package\registration\location\customtoolset.1.0.0
C:\any\custom\package\registration\location\customtoolset.1.0.0\linux-x64
C:\any\custom\package\registration\location\customtoolset.1.0.0\linux-arm64
C:\any\custom\package\registration\location\customtoolset.1.0.0\win-x64
C:\any\custom\package\registration\location\customtoolset.1.0.0\win-arm64

# Example of the corresponding registration document in the &#x27;packages&#x27; directory
# C:\VirtualClient\state\customtoolset.vcpkgreg
{
    &quot;name&quot;: &quot;CustomToolset&quot;,
    &quot;description&quot;: &quot;Custom toolset to use with other workload binaries.&quot;,
    &quot;path&quot;: &quot;C:\any\custom\package\registration\location\customtoolset.1.0.0&quot;,
    &quot;archivePath&quot;: null,
    &quot;specifics&quot;: {}
}
</code></pre></div>
</li>
<li>
<p><strong>2) Search the folder location defined by a user-defined environment variable</strong><br>
<!-- -->A user of the Virtual Client can define an environment variable called <b>VCDependenciesPath</b>. This directory will be used
to discover packages with the highest priority. If a package is not defined here, the Virtual Client will look for the package in the
locations noted below. If a package is found in this location, Virtual Client will not search for other locations. The package found
here will be used.</p>
<div class="code-section"><pre><code># e.g.
set VCDependenciesPath=C:\any\custom\packages\location

C:\any\custom\packages\location\geekbench5
C:\any\custom\packages\location\geekbench5\linux-x64
C:\any\custom\packages\location\geekbench5\linux-arm64
C:\any\custom\packages\location\geekbench5\win-x64
C:\any\custom\packages\location\geekbench5\win-arm64
</code></pre></div>
</li>
<li>
<p><strong>3) Search &#x27;packages&#x27; folder location.</strong><br>
<!-- -->The default package store location is the &#x27;packages&#x27; folder within the Virtual Client parent directory. Packages can be placed here
(or downloaded...see below) into this location. The package .vcpkg definition will be used to register the package in the &#x27;packages&#x27;
directory. You can see that a package has been registered by the existence of a .vcpkgreg file in the same directory.</p>
<div class="code-section"><pre><code># e.g.
C:\VirtualClient\packages\geekbench5.1.0.0\linux-x64
C:\VirtualClient\packages\geekbench5.1.0.0\linux-arm64
C:\VirtualClient\packages\geekbench5.1.0.0\win-x64
C:\VirtualClient\packages\geekbench5.1.0.0\win-arm64
C:\VirtualClient\packages\geekbench5.vcpkgreg
</code></pre></div>
</li>
<li>
<p><strong>4) Packages downloaded to the &#x27;packages&#x27; folder</strong>
If Virtual Client does not find a package pre-existing on the system in the locations noted above, it will download the package into the &#x27;packages&#x27; directory.
The package will be registered with a .vcpkgreg file in the same directory.</p>
<div class="code-section"><pre><code># Package Name = geekbench5.1.0.0.zip
# Would be downloaded to the following location.
C:\VirtualClient\packages\geekbench5.1.0.0\linux-x64
C:\VirtualClient\packages\geekbench5.1.0.0\linux-arm64
C:\VirtualClient\packages\geekbench5.1.0.0\win-x64
C:\VirtualClient\packages\geekbench5.1.0.0\win-arm64
C:\VirtualClient\packages\geekbench5.vcpkgreg
</code></pre></div>
</li>
</ul>
<h2 id="package-stores">Package Stores</h2>
<p>The Virtual Client team uses Azure storage accounts to maintain packages that contain workload binaries and dependencies. This enables the Virtual Client team to
keep the size of the Virtual Client down to a minimum for deployment purposes while also making it easy for the application to download/integrate dependencies. Indeed
some of the workloads and their dependencies have files sizes that exceed multiple gigabytes. Virtual Client allows the user to provide a connection string or SAS token/URI
on the command line so that the packages can be downloaded. The following section describes how to do that.</p>
<p>Please contact the Virtual Client team if you do not have questions or need access to the packages stores.</p>
<p><strong>Support for Azure Storage Accounts</strong><br>
<!-- -->If the workload package is stored in an Azure storage account store, the following example shows how to provide the required connection string or
SAS token/URI to the Virtual Client for the container in which the package/blob exists.
to the Virtual Client in order to authenticate.</p>
<div class="code-section"><pre><code class="language-script"># Supply the package store connection string or SAS URI like so:
VirtualClient.exe --profile=PERF-CPU-OPENSSL.json --system=Azure --timeout=1440 --packageStore={BlobStoreConnectionString|SAS URI}
</code></pre></div>
<h3 id="azure-blob-storage">Azure Blob Storage</h3>
<p>The preferred package store option for the Virtual Client is an Azure storage account blob store. Azure blob stores can host very large
block blob packages and have high performance when downloading packages to the system. Additionally, Azure blob stores simplify package download
requirements by allowing containers in the blob store to be defined with a &quot;blob anonymous read&quot; access policy. For packages that do not
contain any sensitive binaries or information, this is the ideal option because it does not require the Virtual Client or user of the application
to supply any access keys. Most of the package dependencies used by the Virtual Client contain binaries and content that is publicly available
and thus can be hosted in the blob store with &quot;blob anonymous read&quot; enabled. The Virtual Client supports containers that require access keys
to be provided in order to download the packages as well.</p>
<h4 id="defining-a-package-dependency">Defining a Package Dependency</h4>
<p>To define a package dependency for a given workload, insert a &#x27;DependencyPackageInstallation&#x27; dependency in the workload profile. The package store
connection string or SAS URI must be supplied on the command line as noted above.</p>
<div class="code-section"><pre><code class="language-json">{
    &quot;Description&quot;: &quot;OpenSSL 3.0 CPU Performance Workload&quot;,
    &quot;Actions&quot;: [
        {
            &quot;Type&quot;: &quot;OpenSslExecutor&quot;,
            &quot;Parameters&quot;: {
                &quot;CommandArguments&quot;: &quot;speed -elapsed -evp md5 -seconds 100&quot;,
                &quot;PackageName&quot;: &quot;openssl&quot;,
                &quot;Tags&quot;: &quot;CPU,OpenSSL,Cryptography&quot;
            }
        }
    ],
    &quot;Dependencies&quot;: [
        {
            &quot;Type&quot;: &quot;DependencyPackageInstallation&quot;,
            &quot;Parameters&quot;: {
                &quot;BlobContainer&quot;: &quot;packages&quot;,
                &quot;BlobName&quot;: &quot;openssl.1.1.0.zip&quot;,
                &quot;PackageName&quot;: &quot;openssl&quot;,
                &quot;Extract&quot;: true
            }
        }
    ]
}
</code></pre></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/microsoft/VirtualClient/edit/main/website/docs/developing/0040-vc-packages.md" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/VirtualClient/docs/developing/0030-workload-onboarding/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Workload Onboarding Process</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/VirtualClient/docs/developing/0050-develop-profiling-monitor/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Profiler Integration</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#virtual-client-packages-vcpkg" class="table-of-contents__link toc-highlight">Virtual Client Packages (*.vcpkg)</a></li><li><a href="#package-definitions" class="table-of-contents__link toc-highlight">Package Definitions</a></li><li><a href="#package-naming-conventions" class="table-of-contents__link toc-highlight">Package Naming Conventions</a></li><li><a href="#packages-with-binariesscripts-that-run-anywhere" class="table-of-contents__link toc-highlight">Packages with Binaries/Scripts that Run Anywhere</a></li><li><a href="#packages-with-support-for-different-platformarchitectures" class="table-of-contents__link toc-highlight">Packages with Support for Different Platform/Architectures</a></li><li><a href="#zipping-up-your-packages" class="table-of-contents__link toc-highlight">Zipping Up Your Packages</a></li><li><a href="#what-packages-are-required" class="table-of-contents__link toc-highlight">What Packages Are Required</a></li><li><a href="#package-search-locations-and-priority" class="table-of-contents__link toc-highlight">Package Search Locations and Priority</a></li><li><a href="#package-stores" class="table-of-contents__link toc-highlight">Package Stores</a><ul><li><a href="#azure-blob-storage" class="table-of-contents__link toc-highlight">Azure Blob Storage</a></li></ul></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/docs/overview/">Overview</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient/discussions" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discussion<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/VirtualClient/blog/">Blog</a></li><li class="footer__item"><a href="https://github.com/microsoft/VirtualClient" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://microsoft.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/VirtualClient/img/microsoft-logo-white-text.svg" alt="MSFT Logo" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright © 2024 Microsoft.</div></div></div></footer></div>
</body>
</html>