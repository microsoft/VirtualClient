{
    "Description": "OpenSSL 3.5.0 Benchmark with TLS",
    "Metadata": {
        "RecommendedMinimumExecutionTime": "01:00:00",
        "SupportedPlatforms": "linux-x64,linux-arm64",
        "SupportedOperatingSystems": "Ubuntu"
    },
    "Parameters": {
        "ServerPort": "5000",
        "ClientInstances": 1,
        "Duration": "00:00:30"
    },
    "Actions": [
        {
          "Type": "TlsOpenSslServerExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Server",
            "MetricScenario": "tls_server",
            "CommandArguments": "s_server -accept {ServerPort} -cert server.crt -key server.key -tls1_3 -WWW",
            "PackageName": "openssl",
            "ServerPort": "$.Parameters.ServerPort",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Server"
          }
        },
	      {
          "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_1k",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-1k",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_1k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_4k",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-4k",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_4k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_16k_{Duration}",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-16k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_16k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_64k_{Duration}",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-64k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_64k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_256k_{Duration}",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-256k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_256k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_1mb_{Duration}",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-1mb_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_1mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_100mb_{Duration}",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-100mb_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_100mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
          "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_128_GCM_SHA256_512mb",
            "MetricScenario": "tls_client_aes-128-gcm-sha256-512mb",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_512mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_128_GCM_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_1k",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-1k",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_1k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_4k",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-4k",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_4k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
         {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_16k_{Duration}",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-16k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_16k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_64k_{Duration}",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-64k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_64k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_256k_{Duration}",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-256k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_256k.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_1mb_{Duration}",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-1mb_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_1mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_100mb_{Duration}",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-100mb_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_100mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_AES_256_GCM_SHA384_512mb",
            "MetricScenario": "tls_client_aes-256-gcm-sha384-512mb",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_512mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_AES_256_GCM_SHA384 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_1k",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-1k",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_1k.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_4k",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-4k",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_4k.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
         {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_16k_{Duration}",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-16k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_16k.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_64k_{Duration}",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-64k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_64k.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_256k_{Duration}",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-256k_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_256k.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_1mb_{Duration}",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-1mb_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_1mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20-POLY1305-SHA256-100mb_{Duration}",
            "MetricScenario": "tls_client_chacha20_poly1305_sha256_100mb_{Duration}",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_100mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        },
        {
            "Type": "TlsOpenSslClientExecutor",
          "Parameters": {
            "Scenario": "OpenSSL_TLS_Client_CHACHA20_POLY1305_SHA256_512mb",
            "MetricScenario": "tls_client_chacha20-poly1305-sha256-512mb",
            "CommandArguments": "s_time -connect :{ServerPort} -www /test_512mb.html -time {Duration.TotalSeconds} -ciphersuites TLS_CHACHA20_POLY1305_SHA256 -tls1_3",
            "Duration": "$.Parameters.Duration",
            "ServerPort": "$.Parameters.ServerPort",
            "PackageName": "openssl",
            "Tags": "CPU,OpenSSL,Cryptography",
            "Role": "Client"
          }
        }
    ],
  "Dependencies": [
    {
      "Type": "DependencyPackageInstallation",
      "Parameters": {
        "Scenario": "InstallOpenSSLPackage",
        "BlobContainer": "packages",
        "BlobName": "openssl.3.5.0.zip",
        "PackageName": "openssl",
        "Extract": true
      }
    },
    {
    "Type": "DependencyPackageInstallation",
    "Parameters": {
        "Scenario": "InstallTlsResourcesForTLSTesting",
        "BlobContainer": "packages",
        "BlobName": "tls-resources.zip",
        "PackageName": "tls-resources",
        "Extract": true,
        "Role": "Server"
      }
    },
    {
      "Type": "ApiServer",
      "Parameters": {
        "Scenario": "StartAPIServer"
      }
    }
  ]
}
