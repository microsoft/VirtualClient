{
    "Description": "DeathStarBench Docker Swarm Network Performance Workload",
    "Metadata": {
        "RecommendedMinimumExecutionTime": "00:30:00",
        "SupportedPlatforms": "linux-x64",
        "SupportedOperatingSystems": "CBL-Mariner,CentOS,Debian,RedHat,Suse,Ubuntu"
    },
    "Parameters": {
        "ThreadCount": "20",
        "ConnectionCount": "1000",
        "Duration": "00:05:00",
        "RequestPerSec": "1000",
        "GraphType": "socfb-Reed98"
    },
    "Actions": [
        {
            "Type": "DeathStarBenchExecutor",
            "Parameters": {
                "Scenario": "SocialNetwork",
                "ServiceName": "socialnetwork",
                "GraphType": "$.Parameters.GraphType",
                "ThreadCount": "$.Parameters.ThreadCount",
                "ConnectionCount": "$.Parameters.ConnectionCount",
                "Duration": "$.Parameters.Duration",
                "RequestPerSec": "$.Parameters.RequestPerSec",
                "PackageName": "deathstarbench",
                "Tags": "socialNetwork,CPU,DeathStarBench,DeathStarBenchServices"
            }
        },
        {
            "Type": "DeathStarBenchExecutor",
            "Parameters": {
                "Scenario": "MediaMicroservices",
                "ServiceName": "mediamicroservices",
                "ThreadCount": "$.Parameters.ThreadCount",
                "ConnectionCount": "$.Parameters.ConnectionCount",
                "Duration": "$.Parameters.Duration",
                "RequestPerSec": "$.Parameters.RequestPerSec",
                "PackageName": "deathstarbench",
                "Tags": "mediaMicroservices,CPU,DeathStarBench,DeathStarBenchServices"
            }
        },
        {
            "Type": "DeathStarBenchExecutor",
            "Parameters": {
                "Scenario": "HotelReservation",
                "ServiceName": "hotelreservation",
                "ThreadCount": "$.Parameters.ThreadCount",
                "ConnectionCount": "$.Parameters.ConnectionCount",
                "Duration": "$.Parameters.Duration",
                "RequestPerSec": "$.Parameters.RequestPerSec",
                "PackageName": "deathstarbench",
                "Tags": "hotelReservation,CPU,DeathStarBench,DeathStarBenchServices"
            }
        }
    ],
  "Dependencies": [
    {
      "Type": "DependencyPackageInstallation",
      "Parameters": {
        "Scenario": "InstallDeathStarBenchPackage",
        "BlobContainer": "packages",
        "BlobName": "deathstarbench.3.0.0.zip",
        "PackageName": "deathstarbench",
        "Extract": true
      }
    },
    {
      "Type": "DockerInstallation",
      "Parameters": {
        "Scenario": "InstallDocker"
      }
    },
    {
      "Type": "WgetPackageInstallation",
      "Parameters": {
        "Scenario": "InstallLibsslPackage",
        "PackageName": "libssl",
        "PackageUri": "http://security.ubuntu.com/ubuntu/pool/main/o/openssl1.0/libssl1.0.0_1.0.2n-1ubuntu5.13_amd64.deb",
        "SupportedPlatforms": "linux-x64",
        "Notes": "Example path to package -> /packages/libssl"
      }
    },
    {
      "Type": "ExecuteCommand",
      "Parameters": {
        "Scenario": "InstallLibssl",
        "SupportedPlatforms": "linux-x64",
        "Command": "dpkg -i libssl1.0.0_1.0.2n-1ubuntu5.13_amd64.deb",
        "WorkingDirectory": "{PackagePath:libssl}"
      }
    },
    {
      "Type": "LinuxPackageInstallation",
      "Parameters": {
        "Scenario": "InstallLinuxPackages",
        "Packages-Apt": "python3-pip,libssl-dev,libz-dev,luarocks,libssl1.0.0,python3.12-venv"
      }
    },
    {
      "Type": "ApiServer",
      "Parameters": {
        "Scenario": "StartAPIServer"
      }
    }
  ]
}